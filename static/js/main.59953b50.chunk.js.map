{"version":3,"sources":["actions/index.js","lib/Scene.js","constants.js","components/TrackComponents/TrackControlContainer/PlayButton.jsx","components/TrackComponents/TrackControlContainer/StopButton.jsx","components/TrackComponents/TrackControlContainer/index.jsx","components/TrackComponents/TrackNameContainer/TrackLabel.jsx","components/TrackComponents/TrackNameContainer/index.jsx","components/TrackComponents/Track/index.jsx","components/TrackComponents/TrackContainer/index.jsx","components/TrackComponents/Timeline/index.jsx","components/AttributeComponents/CustomComponents/IntEdit.jsx","components/AttributeComponents/CustomComponents/FloatEdit.jsx","components/AttributeComponents/CustomComponents/StringEdit.jsx","components/AttributeComponents/CustomComponents/BooleanEdit.jsx","components/AttributeComponents/CustomComponents/SelectEdit.jsx","components/AttributeComponents/CustomComponents/FileEdit.jsx","components/AttributeComponents/EffectComponent/AddEffectButton.jsx","components/AttributeComponents/EffectComponent/index.jsx","components/AttributeComponents/CustomComponents/TextAreaEdit.jsx","components/AttributeComponents/ObjAttrComponent/index.jsx","components/AttributeComponents/index.jsx","components/LeftPanel/DefaultObjIcon.jsx","components/LeftPanel/SelectionIcon.jsx","components/LeftPanel/MoreObjIcon.jsx","components/LeftPanel/index.jsx","components/App.js","serviceWorker.js","index.js","reducers/index.js","actions/types.js","lib/Track.js","lib/EffectStack.js","lib/DefaultObjects/GraphicalObject.js","lib/SVG_plugins/svg.draggable.js","lib/SVG_plugins/svg.draw.js","lib/SVG_plugins/circle.js","lib/SVG_plugins/ellipse.js","lib/SVG_plugins/lineable.js","lib/SVG_plugins/rectable.js","lib/SVG_plugins/svg.resize.js","lib/SVG_plugins/svg.select.js","lib/DefaultObjects/GraphObject.js","lib/DefaultObjects/RectObject.js","lib/DefaultObjects/CircleObject.js","lib/DefaultObjects/TextObject.js","lib/sales.csv","lib/DefaultEffects/AnimationEffect.js","lib/SimpleBarChart/MoveEffect.js","lib/SimpleBarChart/FadeEffect.js","lib/SimpleBarChart/BarGrowByOne.js","lib/SimpleBarChart/BarSort.js","lib/SimpleBarChart/SimpleBarChart.js"],"names":["__webpack_require__","d","__webpack_exports__","emptySelection","showMoreObjects","editDuration","deleteObject","createObject","setObject","addEffect","editAttribute","playpauseresume","stop","reachTo","playing","edit_effect_stack","addObject","_types__WEBPACK_IMPORTED_MODULE_0__","type","EMPTY_SELECTION","payload","SHOW_MORE_OBJECTS","newDuration","EDIT_DURATION","graphicalObject","DELETE_OBJECT","blueprint","CREATE_OBJECT","SET_OBJECT","animationEffect","ADD_EFFECT","target","attribute","value","EDIT_ATTRIBUTE","ACTION_PLAYPAUSERESUME","ACTION_STOP","time","ACTION_REACH_TIME","PLAYING","start_time","duration","EDIT_EFFECT_STACK","obj","ADD_OBJECT","input_types","STRING","INT","FLOAT","DROPDOWN","SELECTOR","BOOLEAN","CONST","TEXT_AREA","scene_action","PLAY","PAUSE","STOP","BluePrintLibrary","Object","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","blueprints","length","arguments","undefined","self","input","document","createElement","click","onchange","e","file","files","reader","FileReader","readAsText","onload","readerEvent","content","result","script","object_name","name","split","console","log","text","head","appendChild","blue_print","eval","add_blueprint","i","splice","ObjectBPLib","EffectBPLib","new_bps","DefaultBPLib","_this","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_0__","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_1__","call","RectObject","get_blueprint","CircleObject","TextObject","SimpleBarChart","Scene","canvas_width","canvas_height","show_time","time_stamp","last_timestamp","curr_timestamp","cancelAnimationFrame","curr_animation_frame_req","store","dispatch","requestAnimationFrame","bind","graphical_objects","effect_bp_lib","obj_bp_lib","default_bp_lib","curr_graphical_object","curr_effectstack","curr_action","show_effect_bps","show_obj_bps","graphical_object","push","set_curr_graphical_object","set_duration","create_fn","add_graphical_object","load_new_bps","deselect","to_remove_el","getElementById","unique_id","parentNode","removeChild","forEach","object","select","effectstacks","track","effect_stacks","effect_bps","add_effectstack","stack_attrs","set_start_time","effect_bp","add_effect","effect","remove_effect","jsFile","_this2","pause","resume","play","play_time","_this3","new_duration","edit_duration","edit_attr","_this4","scene","current_action","obj_blueprints","export_state","effect_blueprints","default_blueprints","generate_unique_id","id","PIXELS_PER_SECOND","SVG_OFFSET","TIMELINE_HEIGHT","PlayButton","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","word","icon","react_default","a","className","onClick","handleClick","React","Component","connect","state","StopButton","class","TrackControlContainer","TrackControlContainer_PlayButton","TrackControlContainer_StopButton","style","height","concat","borderBottom","borderTop","reference_object","TrackNameContainer","$","scroll","scrollTop","content_els","objs","new_el","TrackNameContainer_TrackLabel","TrackComponents_TrackControlContainer","width","overflow","Track","dragMoveListener","event","editable","x","Math","max","parseFloat","getAttribute","dx","y","dy","setAttribute","componentDidMount","assertThisInitialized","interact","draggable","onmove","startAxis","lockAxis","modifiers","restrict","restriction","elementRect","top","left","bottom","right","resizable","edges","restrictEdges","outer","restrictSize","min","on","rect","deltaRect","translate","marginLeft","transform","TrackContainer","autoScroll","container","pixels","currTimestamp","TrackComponents_Track","position","zIndex","data-x","Timeline","renderAxis","formatxAxis","d3","svg","attr","domain","range","append","tickFormat","ticks","overflowY","alignItems","TrackComponents_TrackNameContainer","TrackComponents_TrackContainer","IntEdit","handleChange","min_value","desc","max_value","parseInt","test","key","pattern","onChange","FloatEdit","step","StringEdit","BooleanEdit","checked","Fragment","FileEdit","alert","preventDefault","AddEffectButton","current_bp","bp_dict","options","bp","option","keys","effect_selector","selectedIndex","EffectStackMenuItem","input_field","content_el","all_effect_contents","section","effects","CustomComponents_IntEdit","CustomComponents_FloatEdit","CustomComponents_BooleanEdit","SelectEdit","CustomComponents_FileEdit","CustomComponents_StringEdit","section_name","EffectComponent_AddEffectButton","TextAreaEdit","rows","CustomComponents_TextAreaEdit","AttributeMenu","component","forceUpdate","ObjAttrComponent","EffectComponent","DefaultObjIcon","icon_representation","aria-hidden","SelectionIcon","MoreObjIcon","LeftPanel_SelectionIcon","LeftPanel_DefaultObjIcon","LeftPanel","TrackComponents_Timeline","AttributeComponents","Boolean","window","location","hostname","match","createStore","action","types","create_graphical_object","remove_graphical_object","toggle_effect_bps","toggle_obj_bps","edit_effectstack","remove_effectstack","set_curr_effectstack","import_graphical_object_blueprint","import_effect_blueprint","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","es","components_App","navigator","serviceWorker","ready","then","registration","unregister","SELECT_OBJECT","DELETE_EFFECT","ADD_EFFECT_STACK","DELETE_EFFECT_STACK","SET_EFFECT_STACK","IMPORT_EFFECT_BP","IMPORT_OBJECT_BP","IMPORT_BLUEPRINT","IMPORT_EFFECT","SHOW_EFFECTS","TOGGLE_EFFECT_BPS","TOGGLE_OBJ_BPS","actor","effect_stack","sort","b","remove_stack","stack","EffectStack","enabled","scheduled","new_effect","enable","disable","SVG_reference","hide","schedule","setTimeout","show","clearTimeout","GraphicalObject","total_width","total_height","opacity","data","selectize","resize","edit_default_attr","tooltips","Number","MAX_SAFE_INTEGER","export_default_attributes","objectSpread","export_attributes","getCoordsFromEvent","ev","changedTouches","clientX","clientY","DragHandler","el","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","remember","drag","startDrag","endDrag","off","isMouse","indexOf","which","buttons","fire","handler","defaultPrevented","stopPropagation","init","box","bbox","lastClick","point","eventMove","eventEnd","currentClick","newBox","Box","w","h","move","G","prototype","extend","Element","svg_js__WEBPACK_IMPORTED_MODULE_0__","svg_js__WEBPACK_IMPORTED_MODULE_0___default","n","PaintHandler","plugin","getPlugin","parent","SVG","Nested","Doc","p","node","createSVGPoint","m","startPoint","lastUpdateCall","set","Set","draw","defaults","start","transformPoint","offset","pageXOffset","pageYOffset","matrixTransform","getScreenCTM","inverse","snapToGrid","sqrt","update","pointPlugin","clean","forget","calc","done","cancel","remove","temp","param","plugins","Event","paintHandler","shapes","shapesArr","trim","cx","cy","r","circle","rx","ry","ellipse","abs","arr","plot","drawCircles","array","valueOf","pop","each","clear","multiply","add","stroke","fill","center","undo","members","ResizeHandler","parameters","doc","_extractPosition","touches","txPt","detail","rotation","fontSize","pointCoords","diffX","diffY","snap","checkAspectRatio","size","current","sAngle","atan2","pAngle","angle","PI","snapToAngle","rotate","flag","pointCoordsY","constraintToBox","orgX","orgY","c","constraint","minX","maxX","minY","maxY","isReverse","saveAspectRatio","updatedSnap","slice","aspectRatio","newW","newH","newAspectRatio","SelectHandler","pointSelection","isSelected","rectSelection","pointsList","lt","rt","rb","lb","t","l","pointCoord","setting","isPointCentered","coord","settings","points","pointsLists","reduce","filter","pointsExclude","nested","group","matrix","Matrix","deepSelect","selectPoints","selectRect","observe","cleanup","drawPoints","getPointArray","map","len","curriedEvent","k","returnValue","pageX","pageY","drawPoint","addClass","classPoints","pointType","drawCircle","drawRect","Error","pointSize","pointStroke","pointFill","updatePointSelection","updateRectSelection","get","index","coords","rotationPoint","getMoseDownFunc","eventName","classRect","pointElement","MutationObserver","observerInst","attributes","disconnect","color","GraphObject","bounding_box","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","svg_container","construct_svg_container","adopt","set_on_click","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","styling","apply_string_style","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","style_dict","JSON","parse","error","new_attr","additional_styling","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","callback","drawing","start_draw","end_draw","create","C_Users_Khai_Nguyen_Desktop_DataAnimate_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__","radius","font_family","font_styling","WebFont","load","google","families","font","family","font_style","module","exports","AnimationEffect","exclusive","DOM_target_components","target_component","get_targetable_components","reconstruct_graph","MoveEffect","start_x","start_y","end_x","end_y","targetable_components","CONTAINER","X AXIS","y AXIS","XY AXIS","BAR","curr_target_component","timestamp","svg_e","start_timestamp","animate","FadeEffect","original_opacity","start_opacity","end_opacity","curr_opacity","BarGrowByOne","bars","graph_height","y_scale","y_data","curr_percent","per","curr_y","transition","interrupt","start_per","end_per","BarSort","x_scale","x_data","x_axis","stringify","delay","selectAll","construct_graph","y_axis","columns","inner_graph","margin","graph_width","raw_data","axis_styling","bar_styling","import_data","construct_inner_graph","construct_x_axis","construct_y_axis","enter","bandwidth","apply_bar_string_styling"],"mappings":"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","file":"static/js/main.59953b50.chunk.js","sourcesContent":["import {\r\n  SELECT_OBJECT,\r\n  DELETE_OBJECT,\r\n  CREATE_OBJECT,\r\n  ADD_EFFECT,\r\n  DELETE_EFFECT,\r\n  ADD_EFFECT_STACK,\r\n  SET_EFFECT_STACK,\r\n  DELETE_EFFECT_STACK,\r\n  SET_OBJECT,\r\n  EDIT_ATTRIBUTE,\r\n  IMPORT_BLUEPRINT,\r\n  IMPORT_EFFECT,\r\n  EDIT_DURATION,\r\n  SHOW_MORE_OBJECTS,\r\n  SHOW_EFFECTS,\r\n  EMPTY_SELECTION,\r\n  ACTION_PAUSE,\r\n  ACTION_PLAYPAUSERESUME,\r\n  ACTION_REACH_TIME,\r\n  ACTION_RESUME,\r\n  ACTION_STOP,\r\n  TOGGLE_EFFECT_BPS,\r\n  TOGGLE_OBJ_BPS,\r\n  PLAYING,\r\n  EDIT_EFFECT_STACK,\r\n  ADD_OBJECT\r\n} from './types';\r\n\r\nexport const emptySelection = () => ({\r\n  type: EMPTY_SELECTION,\r\n  payload: null,\r\n});\r\n\r\nexport const showMoreObjects = () => ({\r\n  type: SHOW_MORE_OBJECTS,\r\n  payload: null,\r\n});\r\nexport const showEffects = () => ({\r\n  type: SHOW_EFFECTS,\r\n  payload: null,\r\n});\r\nexport const editDuration = newDuration => ({\r\n  type: EDIT_DURATION,\r\n  payload: newDuration,\r\n});\r\n\r\nexport const selectObject = graphicalObject => ({\r\n  type: SELECT_OBJECT,\r\n  payload: graphicalObject,\r\n});\r\n\r\nexport const deleteObject = graphicalObject => ({\r\n  type: DELETE_OBJECT,\r\n  payload: graphicalObject,\r\n});\r\n\r\nexport const createObject = blueprint => ({\r\n  type: CREATE_OBJECT,\r\n  payload: blueprint,\r\n});\r\n\r\nexport const setObject = graphicalObject => ({\r\n  type: SET_OBJECT,\r\n  payload: graphicalObject,\r\n});\r\n\r\nexport const addEffect = animationEffect => ({\r\n  type: ADD_EFFECT,\r\n  payload: animationEffect,\r\n});\r\n\r\nexport const deleteEffect = animationEffect => ({\r\n  type: DELETE_EFFECT,\r\n  payload: animationEffect,\r\n});\r\n\r\nexport const addEffectStack = effectStack => ({\r\n  type: ADD_EFFECT_STACK,\r\n  payload: effectStack,\r\n});\r\n\r\nexport const deleteEffectStack = effectStack => ({\r\n  type: DELETE_EFFECT_STACK,\r\n  payload: effectStack,\r\n});\r\n\r\n\r\nexport const setEffectStack = effectStack => ({\r\n  type: SET_EFFECT_STACK,\r\n  payload: effectStack,\r\n});\r\n\r\n// export const selectObject = graphicalObject => ({\r\n//   type: SELECT_OBJECT,\r\n//   payload: graphicalObject,\r\n// });\r\n\r\nexport const editAttribute = (target, attribute, value) => ({\r\n  type: EDIT_ATTRIBUTE,\r\n  payload: {\r\n    target,\r\n    attribute,\r\n    value,\r\n  }\r\n});\r\n\r\nexport const importBlueprint = jsFile => ({\r\n  type: IMPORT_BLUEPRINT,\r\n  payload: jsFile,\r\n});\r\n\r\nexport const importEffect = jsFile => ({\r\n  type: IMPORT_EFFECT,\r\n  payload: jsFile,\r\n});\r\n\r\n\r\nexport const playpauseresume = () => ({\r\n  type: ACTION_PLAYPAUSERESUME\r\n});\r\n\r\n\r\nexport const stop = () => ({\r\n  type: ACTION_STOP\r\n})\r\n\r\n\r\nexport const reachTo = time => ({\r\n  type: ACTION_REACH_TIME,\r\n  payload: time\r\n});\r\n\r\nexport const toggle_effect_bps = () => ({\r\n  type: TOGGLE_EFFECT_BPS\r\n});\r\n\r\nexport const toggle_ob_bps = () => ({\r\n  type: TOGGLE_OBJ_BPS\r\n});\r\n\r\nexport const playing = () => ({\r\n  type: PLAYING\r\n})\r\n\r\nexport const edit_effect_stack = (start_time, duration) => ({\r\n  type: EDIT_EFFECT_STACK,\r\n  payload: { start_time, duration }\r\n})\r\n\r\nexport const addObject = (obj) => ({\r\n  type: ADD_OBJECT,\r\n  payload: obj\r\n})","import RectObject from './DefaultObjects/RectObject';\r\nimport CircleObject from './DefaultObjects/CircleObject';\r\nimport TextObject from './DefaultObjects/TextObject';\r\nimport { selectObject, stop, playing, setEffectStack } from '../actions';\r\nimport { store } from '../index';\r\nimport SimpleBarChart from './SimpleBarChart/SimpleBarChart';\r\nexport const input_types = {\r\n    STRING: \"string\",\r\n    INT: \"int\",\r\n    FLOAT: \"float\",\r\n    DROPDOWN: \"dropdown\",\r\n    SELECTOR: \"selector\",\r\n    BOOLEAN: \"boolean\",\r\n    CONST: \"const\",\r\n    TEXT_AREA: \"text_area\"\r\n}\r\n\r\nexport const scene_action = {\r\n    PLAY: 'PLAY',\r\n    PAUSE: 'PAUSE',\r\n    STOP: 'STOP'\r\n}\r\n// dummy class to hold all of the blueprints\r\nclass BluePrintLibrary {\r\n    constructor() {\r\n        this.blueprints = [];\r\n    }\r\n\r\n    get_num_blueprints() {\r\n        return this.blueprints.length;\r\n    }\r\n\r\n    add_blueprint(blueprint, self = this) {\r\n        this.blueprints[blueprint.type] = blueprint;\r\n    }\r\n\r\n    import(self = this) {\r\n        var input = document.createElement('input');\r\n        input.type = 'file';\r\n        input.click();\r\n        input.onchange = e => {\r\n\r\n            // getting a hold of the file reference\r\n            var file = e.target.files[0];\r\n\r\n            // setting up the reader\r\n            var reader = new FileReader();\r\n            reader.readAsText(file, 'UTF-8');\r\n\r\n            // here we tell the reader what to do when it's done reading...\r\n            reader.onload = readerEvent => {\r\n                var content = readerEvent.target.result; // this is the content!\r\n                var script = document.createElement('script');\r\n                const object_name = file.name.split(\".\")[0];\r\n                console.log(script);\r\n                script.text = content;\r\n                document.head.appendChild(script); //or something of the likes\r\n                const blue_print = eval(object_name + \".get_blueprint()\");\r\n                self.add_blueprint(blue_print);\r\n            }\r\n        }\r\n    }\r\n\r\n    remove_blueprint(blueprint, self = this) {\r\n        for (let i = 0; i < self.blueprints.length; i++) {\r\n            if (self.blueprints[i] === blueprint) {\r\n                self.blueprints.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    export_state() {\r\n        return this.blueprints;\r\n    }\r\n\r\n}\r\n\r\nclass ObjectBPLib extends BluePrintLibrary {\r\n}\r\n\r\nclass EffectBPLib extends BluePrintLibrary {\r\n    load_new_bps(new_bps, self = this) {\r\n        this.blueprints = new_bps;\r\n    }\r\n}\r\n\r\nclass DefaultBPLib extends BluePrintLibrary {\r\n    constructor() {\r\n        super();\r\n        // initiate the default blueprints\r\n        this.add_blueprint(RectObject.get_blueprint());\r\n        this.add_blueprint(CircleObject.get_blueprint());\r\n        this.add_blueprint(TextObject.get_blueprint());\r\n        this.add_blueprint(SimpleBarChart.get_blueprint());\r\n    }\r\n}\r\n\r\nclass Scene {\r\n    constructor(duration, canvas_width, canvas_height) {\r\n        this.canvas_width = 0;\r\n        this.canvas_height = 0;\r\n        this.duration = duration;\r\n        this.graphical_objects = [];\r\n        this.effect_bp_lib = new EffectBPLib();\r\n        this.obj_bp_lib = new ObjectBPLib();\r\n        this.default_bp_lib = new DefaultBPLib();\r\n        this.curr_graphical_object = null;\r\n        this.curr_effectstack = null;\r\n        this.curr_timestamp = 0;\r\n        this.last_timestamp = null;\r\n        this.curr_action = scene_action.STOP;\r\n        this.show_effect_bps = false;\r\n        this.show_obj_bps = false;\r\n        this.curr_animation_frame_req = null;\r\n    }\r\n\r\n    add_graphical_object(graphical_object, self = this) {\r\n        self.graphical_objects.push(graphical_object);\r\n        self.set_curr_graphical_object(graphical_object);\r\n        self.set_duration();\r\n    }\r\n\r\n    create_graphical_object(blueprint, self = this) {\r\n        blueprint.create_fn(this.add_graphical_object);\r\n    }\r\n\r\n    remove_graphical_object(graphical_object, self = this) {\r\n        // remove its data from the scene\r\n        for (var i = 0; i < self.graphical_objects.length; i++) {\r\n            if (self.graphical_objects[i] === graphical_object) {\r\n                self.graphical_objects.splice(i, 1);\r\n            }\r\n        }\r\n        self.curr_graphical_object = null;\r\n        self.curr_effectstack = null;\r\n        this.effect_bp_lib.load_new_bps([]);\r\n        // let's deselect it first to remove the bounding box\r\n        graphical_object.deselect();\r\n        // then remove the one on canvas\r\n        var to_remove_el = document.getElementById(graphical_object.unique_id);\r\n        to_remove_el.parentNode.removeChild(to_remove_el);\r\n\r\n    }\r\n\r\n    set_curr_graphical_object(graphical_object, self = this) {\r\n        this.graphical_objects.forEach(object => {\r\n            object.deselect();\r\n        })\r\n        if (graphical_object === undefined || graphical_object === undefined) {\r\n            this.curr_graphical_object = null;\r\n            this.effect_bp_lib.load_new_bps([]);\r\n            return;\r\n        }\r\n        this.curr_graphical_object = graphical_object;\r\n        // deselect all other objects first\r\n        this.graphical_objects.forEach(object => {\r\n            object.deselect();\r\n        })\r\n        this.curr_graphical_object.select();\r\n\r\n        // load the effect stack, if possible\r\n        const effectstacks = this.curr_graphical_object.track.effect_stacks;\r\n        this.curr_effectstack = effectstacks[0];\r\n        this.effect_bp_lib.load_new_bps(this.curr_graphical_object.effect_bps);\r\n        // store.dispatch(selectObject(this.curr_graphical_object));\r\n    }\r\n\r\n    add_effectstack(add_effectstack, self = this) {\r\n        this.curr_graphical_object.add_effectstack(add_effectstack);\r\n        this.curr_effectstack = add_effectstack;\r\n    }\r\n\r\n    // remove_effectstack(effect_stack = this.curr_effectstack, self = this) {\r\n    //     this.curr_graphical_object.remove_effectstack(effect_stack);\r\n    //     this.curr_effectstack = null;\r\n    // }\r\n\r\n    edit_effectstack(stack_attrs) {\r\n\r\n        const duration = stack_attrs.duration;\r\n        const start_time = stack_attrs.start_time;\r\n        this.curr_effectstack.set_start_time(start_time);\r\n        this.curr_effectstack.set_duration(duration);\r\n    }\r\n\r\n    add_effect(effect_bp, self = this) {\r\n        if (this.curr_effectstack === null || this.curr_effectstack === undefined) return;\r\n        this.curr_effectstack.add_effect(effect_bp);\r\n    }\r\n    remove_effect(effect, self = this) {\r\n        if (this.curr_effectstack === null || this.curr_effectstack === undefined) return;\r\n        this.curr_effectstack.remove_effect(effect);\r\n    }\r\n\r\n    // set_curr_effectstack(curr_effect_stack, self = this) {\r\n    //     this.curr_effectstack = curr_effect_stack;\r\n    // }\r\n\r\n    import_graphical_object_blueprint(self = this) {\r\n        this.obj_bp_lib.add_blueprint();\r\n    }\r\n\r\n    import_effect_blueprint(jsFile, self = this) {\r\n        this.effect_bp_lib.add_blueprint();\r\n    }\r\n\r\n\r\n    playpauseresume(self = this) {\r\n        if (this.curr_graphical_object === null || this.curr_graphical_object === undefined) return;\r\n        this.last_timestamp = null;\r\n        if (this.curr_action === scene_action.PLAY) {\r\n            this.curr_graphical_object.select();\r\n            this.curr_action = scene_action.PAUSE;\r\n            self.graphical_objects.forEach(obj => {\r\n                obj.pause();\r\n            });\r\n            cancelAnimationFrame(this.curr_animation_frame_req);\r\n        }\r\n        else if (this.curr_action === scene_action.PAUSE) {\r\n            this.curr_graphical_object.deselect();\r\n            this.curr_action = scene_action.PLAY;\r\n            this.curr_animation_frame_req = requestAnimationFrame(this.show_time);\r\n            self.graphical_objects.forEach(obj => {\r\n                obj.resume();\r\n            });\r\n        }\r\n        else if (this.curr_action === scene_action.STOP) {\r\n            this.curr_graphical_object.deselect();\r\n            this.curr_action = scene_action.PLAY;\r\n            this.curr_animation_frame_req = requestAnimationFrame(this.show_time);\r\n            self.graphical_objects.forEach(obj => {\r\n                obj.play(this.curr_timestamp);\r\n            });\r\n        }\r\n    }\r\n\r\n    reachTo(play_time, self = this) {\r\n        if (this.curr_action === scene_action.PLAY) return;\r\n        this.last_timestamp = null;\r\n        this.curr_timestamp = play_time;\r\n        self.graphical_objects.forEach(obj => {\r\n            obj.reachTo(play_time);\r\n        });\r\n        cancelAnimationFrame(this.curr_animation_frame_req);\r\n    }\r\n\r\n    set_duration(self = this) {\r\n        self.graphical_objects.forEach(obj => {\r\n            obj.track.set_duration(this.duration);\r\n        });\r\n    }\r\n\r\n    stop(self = this) {\r\n        this.curr_graphical_object.select();\r\n        self.graphical_objects.forEach(obj => {\r\n            obj.stop();\r\n        });\r\n        cancelAnimationFrame(this.curr_animation_frame_req);\r\n        this.curr_timestamp = 0;\r\n        this.last_timestamp = null;\r\n        this.curr_action = scene_action.STOP;\r\n    }\r\n\r\n    show_time = function (time_stamp) {\r\n        if (!this.last_timestamp) this.last_timestamp = time_stamp;\r\n        this.curr_timestamp += time_stamp - this.last_timestamp;\r\n        this.last_timestamp = time_stamp;\r\n        // console.log(this.curr_timestamp);\r\n        if (this.curr_timestamp >= this.duration) {\r\n            cancelAnimationFrame(this.curr_animation_frame_req);\r\n            this.curr_timestamp = this.duration;\r\n            store.dispatch(stop());\r\n            return;\r\n        }\r\n        store.dispatch(playing());\r\n        this.curr_animation_frame_req = requestAnimationFrame(this.show_time);\r\n    }.bind(this);\r\n\r\n    edit_duration(new_duration, self = this) {\r\n        self.duration = new_duration;\r\n        self.graphical_objects.forEach(obj => {\r\n            obj.edit_duration(new_duration);\r\n        })\r\n    }\r\n\r\n    edit_attr(payload, self = this) {\r\n        payload.target.edit_attr(payload);\r\n    }\r\n    toggle_effect_bps() {\r\n        this.show_effect_bps = !this.show_effect_bps;\r\n    }\r\n    toggle_obj_bps() {\r\n        this.show_obj_bps = !this.show_obj_bps;\r\n    }\r\n    export_state() {\r\n        return {\r\n            scene: this,\r\n            current_action: this.curr_action,\r\n            duration: this.duration,\r\n            curr_timestamp: this.curr_timestamp,\r\n            obj_blueprints: this.obj_bp_lib.export_state(),\r\n            effect_blueprints: this.effect_bp_lib.export_state(),\r\n            default_blueprints: this.default_bp_lib.export_state(),\r\n            curr_graphical_object: this.curr_graphical_object === null ? [] : this.curr_graphical_object.export_state(),\r\n            curr_effectstack: this.curr_effectstack === null ? [] : this.curr_effectstack.export_state(),\r\n            show_obj_bps: this.show_obj_bps,\r\n            show_effect_bps: this.show_effect_bps,\r\n            graphical_objects: (() => {\r\n                const d = [];\r\n                this.graphical_objects.forEach(object => {\r\n                    d.push(object.export_state());\r\n                });\r\n                return d;\r\n            })()\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Help from Stackoverflow : https://stackoverflow.com/questions/1535631/static-variables-in-javascript\r\n * Function to generate a global unique id for all the elements\r\n */\r\nexport const generate_unique_id = (function () {\r\n    var id = 0; // This is the private persistent value\r\n    // The outer function returns a nested function that has access\r\n    // to the persistent value.  It is this nested function we're storing\r\n    // in the variable uniqueID above.\r\n    return function () { return id++; };  // Return and increment\r\n})(); // Invoke the outer function after defining it.\r\n\r\nexport const scene = new Scene(60000);\r\n\r\n","export const PIXELS_PER_SECOND = 30;\r\nexport const BULMA_COLUMNS_OFFSET = 12;\r\nexport const AXIS_HEIGHT = 60;\r\nexport const TRACK_HEIGHT = 30;\r\nexport const SVG_OFFSET = 10;\r\nexport const TIMELINE_HEIGHT = 30;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { playpauseresume, editDuration } from '../../../actions/index';\r\nimport { scene_action } from '../../../lib/Scene';\r\nclass PlayButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.word = 'PLAY';\r\n        this.icon = 'fa-play';\r\n    }\r\n\r\n    handleClick() {\r\n        this.props.playpauseresume();\r\n        // this.props.editDuration(this.props.duration + 1000);\r\n    }\r\n    render() {\r\n        switch (this.props.current_action) {\r\n            case scene_action.PLAY:\r\n                this.word = 'PAUSE';\r\n                this.icon = 'fa-pause';\r\n\r\n                break;\r\n            case scene_action.PAUSE:\r\n                this.word = 'RESUME';\r\n                this.icon = 'fa-play';\r\n                break;\r\n            case scene_action.STOP:\r\n                this.word = 'PLAY';\r\n                this.icon = 'fa-play';\r\n                break;\r\n            default:\r\n                this.word = 'PAUSE';\r\n                this.icon = 'fa-pause';\r\n                break;\r\n        }\r\n        console.log(this.word);\r\n        // This syntax ensures `this` is bound within handleClick\r\n        return (\r\n            <button className=\"button is-dark\" onClick={(e) => this.handleClick(e)}>\r\n                <span className=\"icon is-small\">\r\n                    <i className={\"fas \" + this.icon} ></i>\r\n                </span>\r\n            </button>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = state => ({ current_action: state.current_action, duration: state.scene.duration });\r\nexport default connect(mapStateToProps, { playpauseresume, editDuration })(PlayButton);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { stop } from '../../../actions/index'\r\nclass StopButton extends React.Component {\r\n\r\n    handleClick() {\r\n        this.props.stop();\r\n    }\r\n    render() {\r\n        // This syntax ensures `this` is bound within handleClick\r\n        return (\r\n            <button className=\"button is-dark\" onClick={(e) => this.handleClick(e)}>\r\n                <span class=\"icon is-small\">\r\n                    <i class=\"fas fa-stop\"></i>\r\n                </span>\r\n            </button>\r\n        );\r\n    }\r\n}\r\nexport default connect(null, { stop })(StopButton);\r\n","import React from 'react';\r\n\r\nimport PlayButton from './PlayButton'\r\nimport StopButton from './StopButton'\r\nimport {BULMA_COLUMNS_OFFSET, TIMELINE_HEIGHT} from \"../../../constants\";\r\n\r\nconst TrackControlContainer = function (props) {\r\n    return (\r\n        <div class=\"field has-addons\">\r\n            <p class=\"control\">\r\n                <PlayButton> </PlayButton>\r\n\r\n            </p>\r\n            <p className=\"control\">\r\n                <StopButton />\r\n            </p>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport default TrackControlContainer;\r\n\r\n","import React from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {deleteObject} from \"../../../actions\";\r\nimport {TRACK_HEIGHT} from \"../../../constants\";\r\n\r\nconst TrackLabel = props => {\r\n  return(\r\n  <div className=\"column is-12\">\r\n    <div className=\"level\" style={{ height: `${TRACK_HEIGHT}px`, borderBottom: '1px solid grey', borderTop: '1px solid grey' }}>\r\n      <div className=\"level-left\">\r\n        {props.obj.name.value}\r\n      </div>\r\n      <div className=\"level-right\">\r\n        <a className=\"delete-button\" >\r\n                <span className=\"icon is-small\">\r\n                  <i className=\"fas fa-trash\" onClick={() => props.deleteObject(props.obj.reference_object.value)}/>\r\n                </span>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n};\r\n\r\nexport default connect(null, { deleteObject })(TrackLabel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport $ from \"jquery\";\r\n\r\nimport './style.css';\r\nimport {BULMA_COLUMNS_OFFSET, TIMELINE_HEIGHT, TRACK_HEIGHT} from \"../../../constants\";\r\n\r\nimport TrackControlContainer from '../TrackControlContainer';\r\nimport TrackLabel from \"./TrackLabel\";\r\n\r\n\r\nclass TrackNameContainer extends React.Component {\r\n  componentDidMount() {\r\n    $(\"#scrollSync2\").scroll(function () {\r\n      $(\"#scrollSync1\").scrollTop($(this).scrollTop());\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let content_els = [];\r\n    this.props.objs.forEach(obj => {\r\n      let new_el = (\r\n        <TrackLabel obj={obj} />\r\n      );\r\n      content_els.push(new_el);\r\n    });\r\n    return (\r\n      <div className=\"column is-2 track-name-container\">\r\n        <div className=\"columns is-multiline\">\r\n          <div className=\"column is-12\" style={{ height: `${TIMELINE_HEIGHT + 5.5 + 2 * BULMA_COLUMNS_OFFSET}px` }}>\r\n            <TrackControlContainer />\r\n          </div>\r\n              <div  id=\"scrollSync2\" style={{height: '230px', width: '100%', overflow: 'auto'}}>\r\n                {content_els}\r\n              </div>\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nexport default TrackNameContainer;","import React from 'react';\r\n\r\nimport interact from \"interactjs\";\r\n\r\nimport { PIXELS_PER_SECOND, TRACK_HEIGHT } from \"../../../constants\";\r\nimport { SVG_OFFSET } from \"../../../constants\";\r\nimport { connect } from 'react-redux';\r\nimport { edit_effect_stack, setObject } from '../../../actions/index'\r\nimport './style.css';\r\n\r\nclass Track extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.editable = false;\r\n    }\r\n    dragMoveListener = (event) => {\r\n        if (this.props.state.curr_graphical_object.length === 0) return;\r\n        this.editable = (this.props.state.curr_graphical_object.reference_object.value === this.props.obj.reference_object.value);\r\n        if (!this.editable) return;\r\n        let target = event.target,\r\n            x = Math.max(0, (parseFloat(target.getAttribute('data-x')) || 0) + event.dx),\r\n            y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n        this.props.edit_effect_stack((x) / PIXELS_PER_SECOND * 1000, this.props.obj.effect_stacks[0].duration);\r\n        target.setAttribute('data-x', x);\r\n        target.setAttribute('data-y', y);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if (this.props.state.curr_graphical_object.length === 0) return;\r\n\r\n        let id = this.props.obj.reference_object.value.unique_id + \"effect_stack\";\r\n\r\n        const self = this;\r\n        interact('#' + id)\r\n            .draggable({\r\n                onmove: this.dragMoveListener,\r\n                startAxis: 'x',\r\n                lockAxis: 'x',\r\n                modifiers: [\r\n                    interact.modifiers.restrict({\r\n                        restriction: 'parent',\r\n                        elementRect: { top: 0, left: 0, bottom: 1, right: 1 }\r\n                    })\r\n                ]\r\n            })\r\n            .resizable({\r\n                // resize from all edges and corners\r\n                edges: { left: true, right: true },\r\n\r\n                modifiers: [\r\n                    // keep the edges inside the parent\r\n                    interact.modifiers.restrictEdges({\r\n                        outer: 'parent',\r\n                    }),\r\n\r\n                    // minimum size\r\n                    interact.modifiers.restrictSize({\r\n                        min: { width: 1 },\r\n                    }),\r\n                ],\r\n\r\n                //inertia: true\r\n            })\r\n            .on('resizemove', function (event) {\r\n\r\n                let target = event.target,\r\n                    x = (parseFloat(target.getAttribute('data-x')) || 0),\r\n                    y = (parseFloat(target.getAttribute('data-y')) || 0);\r\n\r\n                // update the element's style\r\n                target.style.height = event.rect.height + 'px';\r\n                let duration = event.rect.width / PIXELS_PER_SECOND * 1000;\r\n                if (self.props.state.curr_graphical_object.length === 0) return;\r\n                self.editable = (self.props.state.curr_graphical_object.reference_object.value === self.props.obj.reference_object.value);\r\n                if (self.editable) {\r\n                    x += event.deltaRect.left;\r\n                    y += event.deltaRect.top;\r\n                    self.props.edit_effect_stack((x) / PIXELS_PER_SECOND * 1000, duration);\r\n                    target.setAttribute('data-x', x);\r\n                    target.setAttribute('data-y', y);\r\n                }\r\n                // translate when resizing from top or left edges\r\n\r\n            });\r\n    }\r\n\r\n    render() {\r\n        let id = this.props.obj.reference_object.value.unique_id + \"effect_stack\";\r\n        const time_stamp = (this.props.obj.effect_stacks[0].start_time);\r\n        const duration = (this.props.obj.effect_stacks[0].duration);\r\n        if (this.props.state.curr_graphical_object.length === 0) {\r\n            this.editable = false;\r\n        }\r\n        else {\r\n            this.editable = (this.props.state.curr_graphical_object.reference_object.value === this.props.obj.reference_object.value);\r\n        }\r\n        const pixels = time_stamp / 1000 * PIXELS_PER_SECOND - 1;\r\n        const translate = 'translate(' + pixels + 'px, ' + 0 + 'px)';\r\n        return (\r\n\r\n            <div className=\"column is-12 track\" onClick={() => {\r\n                this.props.setObject(this.props.obj.reference_object.value);\r\n            }}>\r\n                <div className=\"track-border\" style={{ height: `${TRACK_HEIGHT}px`, width: `${PIXELS_PER_SECOND * this.props.duration / 1000}px`, marginLeft: `${SVG_OFFSET}px` }}>\r\n                    <div className=\"effect_stack_timeline \" id={id} style={{ transform: translate, width: `${PIXELS_PER_SECOND * duration / 1000}px` }} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({ duration: state.duration, state: state });\r\nexport default connect(mapStateToProps, { edit_effect_stack, setObject })(Track);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport interact from \"interactjs\";\r\nimport $ from 'jquery';\r\n\r\nimport './style.css';\r\nimport { BULMA_COLUMNS_OFFSET, PIXELS_PER_SECOND, SVG_OFFSET } from \"../../../constants\";\r\n\r\nimport { reachTo } from \"../../../actions\";\r\nimport Track from '../Track';\r\n\r\nclass TrackContainer extends React.Component {\r\n  componentDidMount() {\r\n    interact('#ruler')\r\n      .draggable({\r\n        autoScroll: { container: '#scrollSync1' },\r\n        onmove: this.dragMoveListener,\r\n        startAxis: 'x',\r\n        lockAxis: 'x',\r\n        modifiers: [\r\n          interact.modifiers.restrict({\r\n            restriction: document.getElementById('abc'),\r\n          })\r\n        ]\r\n      });\r\n    $(\"#scrollSync1\").scroll(function () {\r\n      $(\"#scrollSync2\").scrollTop($(this).scrollTop());\r\n    });\r\n  }\r\n\r\n  dragMoveListener = (event) => {\r\n    let target = event.target,\r\n      x = Math.max(0, (parseFloat(target.getAttribute('data-x')) || 0) + event.dx),\r\n      y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n    this.props.reachTo((x) / PIXELS_PER_SECOND * 1000);\r\n    target.setAttribute('data-x', x);\r\n    target.setAttribute('data-y', y);\r\n  };\r\n\r\n  render() {\r\n    const time_stamp = this.props.currTimestamp;\r\n    const pixels = time_stamp / 1000 * PIXELS_PER_SECOND - 1;\r\n    const translate = 'translate(' + pixels + 'px, ' + 0 + 'px)';\r\n\r\n    let content_els = [];\r\n    this.props.objs.forEach(obj => {\r\n      let new_el = (\r\n        <Track obj={obj} />\r\n\r\n      );\r\n      content_els.push(new_el);\r\n    });\r\n\r\n    return (\r\n      <div id=\"scrollSync1\" className=\"column is-10 track-container is-relative\" style={{ height: \"300px\", overflow: 'auto' }}>\r\n        <div id=\"abc\" style={{ position: 'absolute', height: '100%', width: '100%', zIndex: '-190', marginLeft: `${SVG_OFFSET}px` }} />\r\n        <div id=\"ruler\" data-x={pixels} style={{ left: `${SVG_OFFSET + BULMA_COLUMNS_OFFSET}px`, transform: translate }} />\r\n        <div className=\"columns is-multiline\">\r\n          <div className=\"column is-12\">\r\n            <svg className=\"timeline\" />\r\n          </div>\r\n          {content_els}\r\n          {/* <div id=\"scrollSync1\" style={{ height: '230px', width: `${PIXELS_PER_SECOND * this.props.duration / 1000}px`, overflow: 'auto' }}>\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({ duration: state.duration, currTimestamp: state.curr_timestamp });\r\n\r\nexport default connect(mapStateToProps, { reachTo })(TrackContainer);","import React from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nimport './style.css';\r\nimport { PIXELS_PER_SECOND, SVG_OFFSET, TIMELINE_HEIGHT } from '../../../constants';\r\n\r\nimport TrackNameContainer from \"../TrackNameContainer\";\r\nimport TrackContainer from \"../TrackContainer\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nclass Timeline extends React.Component {\r\n  renderAxis = () => {\r\n    var formatxAxis = d3.format('.0f');\r\n    const svg = d3.select(\".timeline\")\r\n      .attr(\"width\", PIXELS_PER_SECOND * this.props.duration / 1000 + 4 * SVG_OFFSET)\r\n      .attr(\"height\", TIMELINE_HEIGHT);\r\n\r\n\r\n    const x = d3.scaleLinear()\r\n      .domain([0, this.props.duration / 1000])\r\n      .range([0, PIXELS_PER_SECOND * this.props.duration / 1000]);\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${SVG_OFFSET},25)`)\r\n      .call(d3.axisTop(x)\r\n        .tickFormat(formatxAxis)\r\n        .ticks(10));\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.renderAxis();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"hero\" style={{ height: '100%' }}>\r\n        <div className=\"hero-body columns is-paddingless\" style={{ overflowY: \"auto\", alignItems: 'start' }}>\r\n          <TrackNameContainer objs={this.props.objs} />\r\n          <TrackContainer objs={this.props.objs} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n};\r\nconst mapStateToProps = state => ({ duration: state.duration, objs: state.graphical_objects });\r\nexport default connect(mapStateToProps)(Timeline);","import React from 'react';\r\nimport { editAttribute } from \"../../../actions/index\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\n\r\n\r\n// const IntEdit = function (props) {\r\n//     return (<><label> {props.attribute.key}</label>\r\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\r\n//             props.editAttribute(props.attribute.key, event.target.value)\r\n//         }} /></>);\r\n// }\r\n\r\nclass IntEdit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        const min_value = this.props.attribute.desc.range[0];\r\n        const max_value = this.props.attribute.desc.range[1];\r\n        const re = /^[0-9\\b]+$/;\r\n        // if value is not blank, then test the regex\r\n        // check value\r\n        if (event.target.value === \"\" || event.target.value === null || event.target.value === undefined) {\r\n            event.target.value = 0\r\n        }\r\n        if (parseInt(event.target.value) < min_value || parseInt(event.target.value) > max_value) return;\r\n        if (re.test(event.target.value)) {\r\n            let target = (this.props.attribute.reference_object);\r\n            this.props.editAttribute(target, this.props.attribute.key, event.target.value)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div class=\"field is-horizontal\" >\r\n                <div class=\"field-label is-small\">\r\n                    <label class=\"label\">{this.props.attribute.key}</label>\r\n                </div>\r\n                <div class=\"field-body\">\r\n                    <div class=\"field\">\r\n                        <div class=\"control\">\r\n                            <input class=\"input\" value={this.props.attribute.desc.value} type=\"text\" pattern=\"[0-9]*\" onChange={this.handleChange} />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, { editAttribute })(IntEdit);\r\n","import React from 'react';\nimport { editAttribute } from \"../../../actions/index\";\nimport { connect } from 'react-redux';\n\n\n\n\n// const IntEdit = function (props) {\n//     return (<><label> {props.attribute.key}</label>\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\n//             props.editAttribute(props.attribute.key, event.target.value)\n//         }} /></>);\n// }\n\nclass FloatEdit extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(event) {\n        const min_value = this.props.attribute.desc.range[0];\n        const max_value = this.props.attribute.desc.range[1];\n        if (event.target.value === \"\" || event.target.value === null || event.target.value === undefined) {\n            event.target.value = min_value;\n        }        // if value is not blank, then test the regex\n        // check value\n        if (parseFloat(event.target.value) < min_value || parseInt(event.target.value) > max_value) return;\n        let target = (this.props.attribute.reference_object);\n        this.props.editAttribute(target, this.props.attribute.key, event.target.value);\n    }\n    render() {\n\n        return (\n            <div class=\"field is-horizontal\">\n                <div class=\"field-label is-small\">\n                    <label class=\"label\">{this.props.attribute.key}</label>\n                </div>\n                <div class=\"field-body\">\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <input class=\"input\" type=\"number\" step=\"0.01\" value={this.props.attribute.desc.value} onChange={this.handleChange} />                        </div>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(null, { editAttribute })(FloatEdit);\n","import React from 'react';\r\nimport { editAttribute } from \"../../../actions/index\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\n\r\n\r\n// const IntEdit = function (props) {\r\n//     return (<><label> {props.attribute.key}</label>\r\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\r\n//             props.editAttribute(props.attribute.key, event.target.value)\r\n//         }} /></>);\r\n// }\r\n\r\nclass StringEdit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        let target = (this.props.attribute.reference_object);\r\n        this.props.editAttribute(target, this.props.attribute.key, event.target.value)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div className=\"field is-horizontal\">\r\n                <div className=\"field-label is-small\">\r\n                    <label className=\"label\">{this.props.attribute.key}</label>\r\n                </div>\r\n                <div class=\"field-body\">\r\n                    <div class=\"field\">\r\n                        <div class=\"control\">\r\n                            <input type=\"text\" class=\"input\" value={this.props.attribute.desc.value} onChange={this.handleChange} />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, { editAttribute })(StringEdit);\r\n","import React from 'react';\r\nimport { editAttribute } from \"../../../actions/index\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\n\r\n\r\n// const IntEdit = function (props) {\r\n//     return (<><label> {props.attribute.key}</label>\r\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\r\n//             props.editAttribute(props.attribute.key, event.target.value)\r\n//         }} /></>);\r\n// }\r\n\r\nclass BooleanEdit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        let target = (this.props.attribute.reference_object);\r\n        this.props.editAttribute(target, this.props.attribute.key, 1 - event.target.value)\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"field is-horizontal\">\r\n                <div className=\"field-label is-small\">\r\n                    <label className=\"label\">{this.props.attribute.key}</label>\r\n                </div>\r\n                <div className=\"field-body\">\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"checkbox\">\r\n                                <input className=\"checkbox\" type=\"checkbox\" value={this.props.attribute.desc.value} checked={this.props.attribute.desc.value === 1} onChange={this.handleChange} />\r\n\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(null, { editAttribute })(BooleanEdit);\r\n","import React from 'react';\nimport { editAttribute } from \"../../../actions/index\";\nimport { connect } from 'react-redux';\n\n\n\n\n// const IntEdit = function (props) {\n//     return (<><label> {props.attribute.key}</label>\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\n//             props.editAttribute(props.attribute.key, event.target.value)\n//         }} /></>);\n// }\n\nclass BooleanEdit extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(event) {\n        const min_value = this.props.attribute.desc.range[0];\n        const max_value = this.props.attribute.desc.range[1];\n        console.log(min_value, max_value);\n        // if value is not blank, then test the regex\n        // check value\n        if (parseFloat(event.target.value) < min_value || parseInt(event.target.value) > max_value) return;\n    }\n\n    render() {\n        return (<><label> {this.props.attribute.key}</label>\n            <input type=\"number\" step=\"0.01\" value={this.props.attribute.desc.value} onChange={this.handleChange} /></>);\n    }\n}\n\nexport default connect(null, { editAttribute })(BooleanEdit);\n","import React from 'react';\nimport { editAttribute } from \"../../../actions/index\";\nimport { connect } from 'react-redux';\n\n\n\n\n// const IntEdit = function (props) {\n//     return (<><label> {props.attribute.key}</label>\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\n//             props.editAttribute(props.attribute.key, event.target.value)\n//         }} /></>);\n// }\n\nclass FileEdit extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(event) {\n        const min_value = this.props.attribute.desc.range[0];\n        const max_value = this.props.attribute.desc.range[1];\n        console.log(min_value, max_value);\n        // if value is not blank, then test the regex\n        // check value\n        if (parseFloat(event.target.value) < min_value || parseInt(event.target.value) > max_value) return;\n        let target = (this.props.attribute.reference_object);\n        this.props.editAttribute(target, this.props.attribute.key, event.target.value)\n    }\n\n    handleSubmit(event) {\n        alert('A name was submitted: ' + this.state.value);\n        event.preventDefault();\n    }\n\n    render() {\n        return (<><label> {this.props.attribute.key}</label>\n            <input type=\"number\" step=\"0.01\" value={this.props.attribute.desc.value} onChange={this.handleChange} /></>);\n    }\n}\n\nexport default connect(null, { editAttribute })(FileEdit);\n","\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n// import './style.css';\r\n\r\nimport { addEffect } from \"../../../actions/index\";\r\n\r\nclass AddEffectButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.current_bp = null;\r\n    this.bp_dict = {};\r\n  }\r\n\r\n  handleClick(e) {\r\n    console.log(this.current_bp);\r\n    this.props.addEffect(this.current_bp);\r\n  }\r\n  select(e) {\r\n    this.current_bp = this.bp_dict[e.target.value];\r\n  }\r\n\r\n  render() {\r\n    // \r\n    const options = [];\r\n    this.props.blueprints.forEach(bp => {\r\n      this.bp_dict[bp.name] = bp;\r\n      let option = <option value={bp.name}>{bp.name}</option>;\r\n      options.push(option);\r\n    });\r\n    this.current_bp = this.bp_dict[Object.keys(this.bp_dict)[0]];\r\n    let effect_selector = document.getElementById(\"effect_selector\");\r\n    if (effect_selector !== null) {\r\n      console.log(effect_selector);\r\n      document.getElementById(\"effect_selector\").selectedIndex = 0;\r\n    }\r\n    return (\r\n      <div class=\"field has-addons\">\r\n        <div class=\"control is-expanded\">\r\n          <div class=\"select is-fullwidth\">\r\n            <select id=\"effect_selector\" name=\"effect\" onChange={(e) => this.select(e)}>\r\n              {options}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"control\">\r\n          <button type='submit' className=\"button is-dark\" onClick={(e) => this.handleClick(e)}>\r\n            <span class=\"icon is-small\">\r\n              <i class={\"fas fa-plus\"} ></i>\r\n            </span>\r\n\r\n          </button>\r\n        </div>\r\n      </div >\r\n\r\n\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({ blueprints: state.effect_blueprints });\r\nexport default connect(mapStateToProps, { addEffect })(AddEffectButton);  ","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { input_types } from '../../../lib/Scene';\r\nimport IntEdit from '../CustomComponents//IntEdit';\r\nimport FloatEdit from '../CustomComponents/FloatEdit';\r\nimport StringEdit from '../CustomComponents/StringEdit';\r\nimport BooleanEdit from '../CustomComponents/BooleanEdit';\r\nimport SelectEdit from '../CustomComponents/SelectEdit';\r\nimport FileEdit from '../CustomComponents/FileEdit';\r\nimport AddEffectButton from './AddEffectButton';\r\nimport { edit_effect_stack } from '../../../actions/index';\r\n\r\nclass EffectStackMenuItem extends React.Component {\r\n\r\n    render() {\r\n        let content_el = [];\r\n        const all_effect_contents = [];\r\n        var attribute, input_field;\r\n\r\n        input_field = (\r\n            <div className=\"field is-horizontal\">\r\n                <div className=\"field-label is-small\">\r\n                    <label className=\"label\">duration</label>\r\n                </div>\r\n                <div className=\"field-body\">\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <input className=\"input\" value={this.props.reference_object.duration} type=\"text\" pattern=\"[0-9]*\" onChange={(e) => {\r\n                                this.props.edit_effect_stack(this.props.reference_object.start_time, e.target.value);\r\n\r\n                            }} />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n        content_el.push(input_field);\r\n        input_field = input_field = (\r\n            <div className=\"field is-horizontal\">\r\n                <div className=\"field-label is-small\">\r\n                    <label className=\"label\">start time</label>\r\n                </div>\r\n                <div className=\"field-body\">\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <input className=\"input\" value={this.props.reference_object.start_time} type=\"text\" pattern=\"[0-9]*\" onChange={(e) => {\r\n                                this.props.edit_effect_stack(e.target.value, this.props.reference_object.duration);\r\n\r\n                            }} />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n        content_el.push(input_field);\r\n        let section = (\r\n            <div>\r\n                <h3 className=\"title\">Effect Stack</h3>\r\n                {content_el}\r\n                <hr/>\r\n            </div>);\r\n\r\n        all_effect_contents.push(section);\r\n        const effects = this.props.reference_object.effects;\r\n        if (!effects) return (<></>);\r\n        effects.forEach(effect => {\r\n            content_el = [];\r\n            Object.keys(effect).forEach(key => {\r\n                attribute = {\r\n                    key,\r\n                    desc: effect[key],\r\n                    reference_object: effect.reference_object.value\r\n                }\r\n                switch (effect[key]['type']) {\r\n                    case input_types.INT:\r\n                        input_field = <IntEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case input_types.FLOAT:\r\n                        input_field = <FloatEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case input_types.BOOLEAN:\r\n                        input_field = <BooleanEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case input_types.DROPDOWN:\r\n                        input_field = <SelectEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case input_types.SELECTOR:\r\n                        input_field = <FileEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case input_types.STRING:\r\n                        input_field = <StringEdit attribute={attribute} />\r\n                        content_el.push(input_field);\r\n                        break;\r\n                    case undefined:\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n            });\r\n            let section_name = effect.name.value;\r\n            let section = (\r\n                <div>\r\n                    <h3 className=\"title\">{section_name}</h3>\r\n                    {content_el}\r\n                    <hr></hr>\r\n                </div>);\r\n\r\n            all_effect_contents.push(section);\r\n        })\r\n\r\n        return (\r\n            <>\r\n                {all_effect_contents}\r\n                <AddEffectButton></AddEffectButton>\r\n            </>\r\n        )\r\n\r\n    };\r\n}\r\nconst mapStateToProps = state => ({ reference_object: state.curr_effectstack });\r\n\r\nexport default connect(mapStateToProps, { edit_effect_stack })(EffectStackMenuItem);","import React from 'react';\nimport { editAttribute } from \"../../../actions/index\";\nimport { connect } from 'react-redux';\n\n\n\n\n// const IntEdit = function (props) {\n//     return (<><label> {props.attribute.key}</label>\n//         <input type=\"text\" value={props.attribute.desc.value} pattern=\"[0-9]*\" onChange={(event) => {\n//             props.editAttribute(props.attribute.key, event.target.value)\n//         }} /></>);\n// }\n\nclass TextAreaEdit extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(event) {\n        let target = (this.props.attribute.reference_object);\n        this.props.editAttribute(target, this.props.attribute.key, event.target.value)\n    }\n\n    render() {\n\n        return (\n            <div class=\"field is-horizontal\">\n                <div class=\"field-label is-small\">\n                    <label class=\"label\">{this.props.attribute.key}</label>\n                </div>\n                <div class=\"field-body\">\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <textarea class=\"textarea\" rows=\"10\" value={this.props.attribute.desc.value} onChange={this.handleChange}></textarea>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(null, { editAttribute })(TextAreaEdit);\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport IntEdit from '../CustomComponents/IntEdit';\r\nimport { input_types } from '../../../lib/Scene';\r\nimport FloatEdit from '../CustomComponents/FloatEdit';\r\nimport StringEdit from '../CustomComponents/StringEdit';\r\nimport BooleanEdit from '../CustomComponents/BooleanEdit';\r\nimport SelectEdit from '../CustomComponents/SelectEdit';\r\nimport FileEdit from '../CustomComponents/FileEdit';\r\nimport TextAreaEdit from '../CustomComponents/TextAreaEdit';\r\n\r\nconst ObjAttrMenuItem = function (props) {\r\n    const content_el = [];\r\n    var attribute, input_field;\r\n    const content = Object.keys(props.reference_object).forEach(key => {\r\n        attribute = {\r\n            key,\r\n            desc: props.reference_object[key],\r\n            reference_object: props.reference_object.reference_object.value\r\n        }\r\n        switch (props.reference_object[key]['type']) {\r\n            case input_types.INT:\r\n                input_field = <IntEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.FLOAT:\r\n                input_field = <FloatEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.BOOLEAN:\r\n                input_field = <BooleanEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.DROPDOWN:\r\n                input_field = <SelectEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.SELECTOR:\r\n                input_field = <FileEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.STRING:\r\n                input_field = <StringEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case input_types.TEXT_AREA:\r\n                input_field = <TextAreaEdit attribute={attribute} />\r\n                content_el.push(input_field);\r\n                break;\r\n            case undefined:\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // content_el.push(<div> {key}</div>);\r\n    });\r\n    return (\r\n        <> {content_el}</>\r\n\r\n    )\r\n};\r\nconst mapStateToProps = state => ({ reference_object: state.curr_graphical_object });\r\nexport default connect(mapStateToProps, null)(ObjAttrMenuItem);","import React from 'react';\r\n\r\n// import './style.css';\r\nimport EffectStackMenuItem from './EffectComponent';\r\nimport ObjAttrMenuItem from './ObjAttrComponent';\r\n\r\nclass AttributeMenu extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.component = 'attributes';\r\n\r\n    }\r\n    handleClick(component) {\r\n        this.component = component;\r\n        this.forceUpdate();\r\n\r\n    }\r\n    render() {\r\n        if (this.component === 'attributes') {\r\n            return (\r\n              <div>\r\n                  <div className=\"tabs is-toggle is-fullwidth \">\r\n                      <ul>\r\n                          <li className=\"is-active\" onClick={(e) => this.handleClick('attributes')} >\r\n                              <a >\r\n                                  <span>Attributes</span>\r\n                              </a>\r\n                          </li>\r\n                          <li onClick={(e) => this.handleClick('effects')} >\r\n                              <a>\r\n                                  <span>Effects</span>\r\n                              </a>\r\n                          </li>\r\n\r\n                      </ul>\r\n                  </div>\r\n                  <ObjAttrMenuItem />\r\n              </div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n              <div>\r\n                  <div className=\"tabs is-toggle is-fullwidth\">\r\n                      <ul>\r\n                          <li onClick={(e) => this.handleClick('attributes')} >\r\n                              <a >\r\n                                  <span>Attributes</span>\r\n                              </a>\r\n                          </li>\r\n                          <li className=\"is-active\" onClick={(e) => this.handleClick('effects')} >\r\n                              <a>\r\n                                  <span>Effects</span>\r\n                              </a>\r\n                          </li>\r\n\r\n                      </ul>\r\n                  </div>\r\n                  <EffectStackMenuItem />\r\n              </div>\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\nexport default AttributeMenu;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createObject } from '../../actions';\r\n\r\nclass DefaultObjIcon extends React.Component {\r\n    render() {\r\n        return (\r\n            <a className=\"panel-block\" onClick={() => this.props.createObject(this.props.blueprint)}>\r\n                <span className=\"panel-icon is-marginless\">\r\n                    <i className={\"fas \" + this.props.blueprint.icon_representation} aria-hidden=\"true\" />\r\n                </span>\r\n            </a>\r\n        )\r\n    }\r\n} export default connect(null, { createObject })(DefaultObjIcon);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { emptySelection } from '../../actions';\r\nclass SelectionIcon extends React.Component {\r\n    render() {\r\n        return (\r\n            <a className=\"panel-block\" onClick={() => this.props.emptySelection()}>\r\n                <span className=\"panel-icon is-marginless\">\r\n                    <i className=\"fas fa-mouse-pointer\" aria-hidden=\"true\" />\r\n                </span>\r\n            </a >\r\n        )\r\n    }\r\n}\r\nexport default connect(null, { emptySelection })(SelectionIcon);\r\n","import React from 'react';\r\nimport { showMoreObjects } from \"../../actions/index\";\r\nimport { connect } from 'react-redux';\r\nclass MoreObjIcon extends React.Component {\r\n    render() {\r\n        return (\r\n            <a className=\"panel-block\" onClick={() => this.props.showMoreObjects()}>\r\n                <span className=\"panel-icon is-marginless\">\r\n                    <i className=\"fas fa-chart-bar\" aria-hidden=\"true\" />\r\n                </span>\r\n            </a>\r\n        )\r\n    }\r\n} export default connect(null, { showMoreObjects })(MoreObjIcon);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport DefaultObjIcon from './DefaultObjIcon';\r\nimport SelectionIcon from './SelectionIcon';\r\nimport MoreObjIcon from './MoreObjIcon';\r\nconst ActionMenu = function (props) {\r\n    const content_el = [];\r\n    var new_el;\r\n    // generate the generic objects, such empty selection\r\n    new_el = <SelectionIcon />;\r\n    content_el.push(new_el);\r\n\r\n    Object.keys(props.blueprints).forEach(key => {\r\n        console.log(props.blueprints);\r\n        new_el = <DefaultObjIcon blueprint={props.blueprints[key]} />;\r\n        content_el.push(new_el);\r\n    });\r\n\r\n    return (\r\n        <div className=\"panel\" style={{ position: 'absolute', left: '0', top: '10%' }}>\r\n            {content_el}\r\n        </div>\r\n    )\r\n};\r\nconst mapStateToProps = state => ({ blueprints: state.default_blueprints });\r\nexport default connect(mapStateToProps, null)(ActionMenu);","import React from 'react';\r\n\r\nimport './App.css'\r\nimport Timeline from \"./TrackComponents/Timeline\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { createObject } from '../actions';\r\nimport AttributeMenu from './AttributeComponents';\r\nimport ActionMenu from './LeftPanel/index';\r\n\r\n\r\nfunction App(props) {\r\n  return (\r\n    <section className=\"hero is-fullheight is-relative\">\r\n      <div className=\"columns is-paddingless is-marginless is-multiline is-background-div\">\r\n        <div className=\"is-view-element-container is-header-container\">\r\n        </div>\r\n\r\n        <div className=\"column is-10 is-view-container\">\r\n          <div className=\"columns is-multiline\">\r\n            <div className=\"column is-12 is-view-element-container is-screen-container is-relative\">\r\n              <svg style={{ position: 'absolute', left: '50px' }} id=\"canvas\" width={1540} height={535} />\r\n              <ActionMenu />\r\n            </div>\r\n            <div className=\"column is-12 is-view-element-container is-timeline-container\">\r\n              <Timeline />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"column is-view-element-container is-menu-container\">\r\n          <AttributeMenu />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default connect(null, { createObject })(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport 'bulma/css/bulma.min.css';\r\nimport '@fortawesome/fontawesome-free/css/all.min.css';\r\nimport { rootReducer } from \"./reducers\";\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport { scene } from './lib/Scene';\r\nexport const store = createStore(rootReducer, scene.export_state(), window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n  , document.getElementById('root'));\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import * as types from '../actions/types';\r\n\r\nexport const rootReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case types.EMPTY_SELECTION:\r\n      // state.scene.add_graphical_object(action.payload);\r\n      state.scene.set_curr_graphical_object();\r\n      return state.scene.export_state();\r\n    case types.PLAYING:\r\n      return state.scene.export_state();\r\n    case types.CREATE_OBJECT:\r\n      state.scene.create_graphical_object(action.payload);\r\n      return state.scene.export_state();\r\n    case types.SELECT_OBJECT:\r\n      return state.scene.export_state();\r\n    case types.DELETE_OBJECT:\r\n      state.scene.remove_graphical_object(action.payload);\r\n      return state.scene.export_state();\r\n    case types.SET_OBJECT:\r\n      state.scene.set_curr_graphical_object(action.payload);\r\n      return state.scene.export_state();\r\n    case types.ADD_OBJECT:\r\n      state.scene.add_graphical_object(action.payload);\r\n      return state.scene.export_state();\r\n    case types.ADD_EFFECT:\r\n      state.scene.add_effect(action.payload);\r\n      return state.scene.export_state();\r\n    case types.DELETE_EFFECT:\r\n      state.scene.remove_effect(action.payload);\r\n      return state.scene.export_state();\r\n    case types.TOGGLE_EFFECT_BPS:\r\n      state.scene.toggle_effect_bps();\r\n      return state.scene.export_state();\r\n    case types.TOGGLE_OBJ_BPS:\r\n      state.scene.toggle_obj_bps();\r\n      return state.scene.export_state();\r\n    case types.ADD_EFFECT_STACK:\r\n      state.scene.add_effectstack(action.payload);\r\n      return state.scene.export_state();\r\n    case types.EDIT_EFFECT_STACK:\r\n      state.scene.edit_effectstack(action.payload);\r\n      return state.scene.export_state();\r\n\r\n    case types.DELETE_EFFECT_STACK:\r\n      state.scene.remove_effectstack();\r\n      return state.scene.export_state();\r\n\r\n    case types.SET_EFFECT_STACK:\r\n      state.scene.set_curr_effectstack(action.payload);\r\n      return state.scene.export_state();\r\n\r\n    case types.IMPORT_OBJECT_BP:\r\n      state.scene.import_graphical_object_blueprint();\r\n      return state.scene.export_state();\r\n\r\n    case types.IMPORT_EFFECT_BP:\r\n      state.scene.import_effect_blueprint();\r\n      return state.scene.export_state();\r\n\r\n    case types.ACTION_PLAYPAUSERESUME:\r\n      state.scene.playpauseresume();\r\n      return state.scene.export_state();\r\n\r\n    case types.ACTION_REACH_TIME:\r\n      state.scene.reachTo(action.payload);\r\n      return state.scene.export_state();\r\n\r\n    case types.ACTION_STOP:\r\n      state.scene.stop();\r\n      return state.scene.export_state();\r\n\r\n    case types.EDIT_ATTRIBUTE:\r\n      state.scene.edit_attr(action.payload);\r\n      return state.scene.export_state();\r\n      \r\n    case types.EDIT_DURATION:\r\n      state.scene.edit_duration(action.payload);\r\n      return state.scene.export_state();\r\n\r\n    default:\r\n      console.log(state);\r\n      return state;\r\n  }\r\n};\r\n","export const SELECT_OBJECT = 'SELECT_OBJECT';\r\nexport const DELETE_OBJECT = 'DELETE_OBJECT';\r\nexport const SET_OBJECT = 'SET_OBJECT';\r\nexport const ADD_OBJECT = 'ADD_OBJECT';\r\nexport const CREATE_OBJECT = 'CREATE_OBJECT';\r\nexport const EDIT_DURATION = 'EDIT_DURATION';\r\nexport const ADD_EFFECT = 'ADD_EFFECT';\r\nexport const DELETE_EFFECT = 'DELETE_EFFECT';\r\nexport const ADD_EFFECT_STACK = 'ADD_EFFECT_STACK';\r\nexport const DELETE_EFFECT_STACK = 'DELETE_EFFECT_STACK';\r\nexport const SET_EFFECT_STACK = 'SET_EFFECT_STACK';\r\nexport const IMPORT_EFFECT_BP = 'IMPORT_EFFECT_BP';\r\nexport const IMPORT_OBJECT_BP = 'IMPORT_OBJECT_BP';\r\n\r\nexport const ACTION_PAUSE = \"ACTION_PAUSE\";\r\nexport const ACTION_PLAYPAUSERESUME = \"ACTION_PLAYPAUSERESUME\";\r\nexport const ACTION_STOP = \"ACTION_STOP\";\r\nexport const ACTION_RESUME = \"ACTION_RESUME\";\r\nexport const ACTION_REACH_TIME = \"ACTION_REACH_TIME\";\r\n\r\nexport const EDIT_EFFECT_STACK = 'EDIT_EFFECT_STACK';\r\nexport const EDIT_ATTRIBUTE = 'EDIT_ATTRIBUTE';\r\nexport const IMPORT_BLUEPRINT = 'IMPORT_BLUEPRINT';\r\nexport const IMPORT_EFFECT = 'IMPORT_EFFECT';\r\n\r\nexport const SET_CURRENT_TIME = 'SET_CURRENT_TIME';\r\n\r\nexport const SHOW_MORE_OBJECTS = 'SHOW_MORE_OBJECTS';\r\nexport const SHOW_EFFECTS = 'SHOW_EFFECTS';\r\nexport const EMPTY_SELECTION = 'EMPTY_SELECTION';\r\n\r\nexport const TOGGLE_EFFECT_BPS = 'TOGGLE_EFFECT_BPS';\r\nexport const TOGGLE_OBJ_BPS = 'TOGGLE_OBJ_BPS';\r\nexport const PLAYING = 'PLAYING';\r\n","\r\nclass Track {\r\n    constructor(actor) {\r\n        this.actor = actor;\r\n        this.effect_stacks = [];\r\n        this.duration = 0;\r\n    }\r\n\r\n    add_effectstack(effect_stack, self = this) {\r\n        self.effect_stacks.push(effect_stack);\r\n        self.effect_stacks = self.effect_stacks.sort((a, b) => (a.start_time > b.start_time) ? 1 : -1);\r\n\r\n    }\r\n    remove_effect_stack(remove_stack, self = this) {\r\n        for (let i = 0; i < self.effect_stacks.length; i++) {\r\n            if (self.effect_stacks[i] === remove_stack) {\r\n                self.effect_stacks.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    set_duration(duration, self = this) {\r\n        self.duration = duration;\r\n    }\r\n\r\n    play(play_time = 0, self = this) {\r\n        self.effect_stacks.forEach(effect_stack => {\r\n            effect_stack.play(play_time);\r\n        });\r\n    }\r\n\r\n    pause(self = this) {\r\n        self.effect_stacks.forEach(effect_stack => {\r\n            effect_stack.pause();\r\n        });\r\n    }\r\n\r\n    resume(self = this) {\r\n        self.effect_stacks.forEach(effect_stack => {\r\n            effect_stack.resume();\r\n        });\r\n    }\r\n\r\n    stop(self = this) {\r\n        self.effect_stacks.forEach(effect_stack => {\r\n            effect_stack.stop();\r\n            effect_stack.reachTo(0);\r\n\r\n        });\r\n    }\r\n\r\n    reachTo(play_time, self = this) {\r\n        self.effect_stacks.forEach(effect_stack => {\r\n            effect_stack.reachTo(play_time);\r\n        });\r\n    }\r\n\r\n    edit_duration(duration) {\r\n        this.duration = duration;\r\n    }\r\n\r\n    export_state(self = this) {\r\n        return {\r\n            duration: this.duration,\r\n            effect_stacks: (() => {\r\n                var effect_stacks = [];\r\n                self.effect_stacks.forEach(stack => {\r\n                    effect_stacks.push(stack.export_state());\r\n                });\r\n                return effect_stacks;\r\n            })()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Track;","\r\n\r\nclass EffectStack {\r\n    constructor(actor, start_time = 0, duration = 500) {\r\n        this.actor = actor;\r\n        this.duration = duration;\r\n        this.track = this.actor.track;\r\n        this.start_time = start_time;\r\n        this.effects = [];\r\n        this.enabled = true;\r\n        this.scheduled = [];\r\n    }\r\n\r\n    set_duration(duration, self = this) {\r\n        if (parseFloat(duration) + parseFloat(self.start_time) > this.track.duration) {\r\n            return;\r\n        }\r\n        self.duration = duration;\r\n        self.effects.forEach(effect => {\r\n            effect.duration = self.duration;\r\n        });\r\n    }\r\n\r\n    set_start_time(start_time, self = this) {\r\n        self.start_time = start_time;\r\n        self.effects.forEach(effect => {\r\n            effect.start_time = self.start_time;\r\n        });\r\n    }\r\n\r\n    add_effect(effect_bp, self = this) {\r\n        const new_effect = effect_bp.create_fn(this);\r\n        self.effects.push(new_effect);\r\n        console.log(new_effect);\r\n        return new_effect;\r\n    }\r\n\r\n    remove_effect(effect, self = this) {\r\n        for (var i = 0; i < self.effects.length; i++) {\r\n            if (self.effects[i] === effect) {\r\n                self.effects.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    enable_effect(effect, self = this) {\r\n        effect.enable();\r\n    }\r\n\r\n    disable_effect(effect, self = this) {\r\n        effect.disable();\r\n    }\r\n\r\n    enable(self = this) {\r\n        self.enable = true;\r\n    }\r\n    disable(self = this) {\r\n        self.enable = false;\r\n    }\r\n\r\n    play(play_time = 0, self = this) {\r\n        if (self.start_time !== 0) self.actor.SVG_reference.hide();\r\n        let schedule = setTimeout(() => {\r\n            self.actor.SVG_reference.show();\r\n        }, self.start_time);\r\n        self.scheduled.push(schedule);\r\n\r\n        schedule = setTimeout(() => {\r\n            self.actor.SVG_reference.hide();\r\n        }, self.start_time + self.duration);\r\n        self.scheduled.push(schedule);\r\n\r\n        self.effects.forEach(effect => {\r\n            if (play_time < self.start_time + self.duration) {\r\n                if (self.start_time >= play_time) {\r\n                    let schedule = setTimeout(() => {\r\n                        effect.play();\r\n                    }, self.start_time - play_time);\r\n                    self.scheduled.push(schedule);\r\n                }\r\n                else {\r\n                    effect.play(play_time - self.start_time);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    pause(self = this) {\r\n        self.effects.forEach(effect => {\r\n            effect.pause();\r\n        });\r\n    }\r\n\r\n    resume(self = this) {\r\n        self.effects.forEach(effect => {\r\n            effect.resume();\r\n        });\r\n    }\r\n    stop(self = this) {\r\n        self.actor.SVG_reference.show();\r\n        self.effects.forEach(effect => {\r\n            effect.stop();\r\n        });\r\n        self.scheduled.forEach(schedule => {\r\n            clearTimeout(schedule);;\r\n        });\r\n        self.scheduled = [];\r\n    }\r\n\r\n    reachTo(play_time, self = this) {\r\n        self.effects.forEach(effect => {\r\n            if (self.start_time <= play_time <= self.start_time + self.duration) {\r\n                effect.reachTo(play_time - self.start_time);\r\n            }\r\n        });\r\n    }\r\n\r\n    export_state(self = this) {\r\n        return {\r\n            reference_object: this,\r\n            duration: this.duration,\r\n            start_time: this.start_time,\r\n            enabled: this.enabled,\r\n            effects: (() => {\r\n                var effects = [];\r\n                self.effects.forEach(effect => {\r\n                    effects.push(effect.export_state());\r\n                });\r\n                return effects;\r\n            })()\r\n        }\r\n    }\r\n}\r\n\r\nexport default EffectStack;\r\n","import Track from '../Track';\r\nimport { input_types, generate_unique_id, scene } from \"../Scene\";\r\nimport EffectStack from '../EffectStack';\r\nimport { editAttribute, setObject, deleteObject } from '../../actions/index';\r\nimport { store } from '../../index';\r\n\r\nclass GraphicalObject {\r\n    constructor(x, y, width, height, name) {\r\n        this.type = \"\";\r\n        this.name = name;\r\n        this.total_width = width;\r\n        this.total_height = height;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.opacity = 1;\r\n        this.track = new Track(this);\r\n        this.data = null;\r\n        this.SVG_reference = null;\r\n        this.show = 1;\r\n        this.unique_id = \"graphicalObject_\" + generate_unique_id();\r\n        this.effect_bps = [];\r\n        this.track.add_effectstack(new EffectStack(this, 0, scene.duration));\r\n        // add onclick event\r\n    }\r\n\r\n    select(self = this) {\r\n        this.SVG_reference.selectize().draggable().resize();\r\n    }\r\n    deselect(self = this) {\r\n        this.SVG_reference.selectize(false).draggable(false).resize(false);;\r\n    }\r\n\r\n    view_as_DOM(self = this) {\r\n        return;\r\n    }\r\n    set_on_click(self = this) {\r\n        this.SVG_reference.on('click', e => {\r\n            store.dispatch(setObject(this));\r\n        })\r\n    }\r\n\r\n    remove_effectstack(effect_stack, self = this) {\r\n        this.track.remove_effectstack(effect_stack);\r\n    }\r\n\r\n    add_effectstack(effect_stack, self = this) {\r\n        this.track.add_effectstack(effect_stack);\r\n    }\r\n\r\n\r\n\r\n    play(play_time = 0, self = this) {\r\n        self.track.play(play_time);\r\n    }\r\n\r\n    pause(self = this) {\r\n        self.track.pause();\r\n    }\r\n\r\n    resume(self = this) {\r\n        self.track.resume();\r\n    }\r\n\r\n    reachTo(play_time, self = this) {\r\n        self.track.reachTo(play_time);\r\n    }\r\n\r\n    stop(self = this) {\r\n        self.track.stop();\r\n    }\r\n\r\n    edit_duration(duration) {\r\n        this.track.edit_duration(duration);\r\n    }\r\n\r\n    edit_default_attr(d) {\r\n        if (!d) return;\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"name\":\r\n                this.name = value;\r\n                return;\r\n            case \"height\":\r\n                this.total_height = value;\r\n                this.SVG_reference\r\n                    .attr(\"height\", this.total_height)\r\n\r\n                break;\r\n            case \"width\":\r\n                this.total_width = value;\r\n                this.SVG_reference\r\n                    .attr(\"width\", this.total_width)\r\n\r\n                break;\r\n            case \"x\":\r\n                this.x = value;\r\n                this.SVG_reference\r\n                    .attr(\"x\", this.x)\r\n                break;\r\n            case \"y\":\r\n                this.y = value;\r\n                this.SVG_reference\r\n                    .attr(\"y\", this.y)\r\n                break;\r\n            case \"opacity\":\r\n                this.opacity = value;\r\n                this.SVG_reference\r\n                    .attr(\"opacity\", this.opacity)\r\n                break;\r\n            case \"show\":\r\n                this.show = value;\r\n                this.show === 1 ? this.SVG_reference.show() : this.SVG_reference.hide();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    edit_attr(d) {\r\n        this.edit_default_attr(d);\r\n    }\r\n\r\n    export_default_attributes(self = this) {\r\n        return {\r\n            name: {\r\n                type: input_types.STRING,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.name\r\n            },\r\n            width: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.total_width,\r\n            },\r\n            height: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.total_height,\r\n            },\r\n            x: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.x\r\n            },\r\n            y: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.y\r\n            },\r\n            opacity: {\r\n                type: input_types.FLOAT,\r\n                range: [0, 1],\r\n                value: this.opacity\r\n            },\r\n            reference_object: {\r\n                type: undefined,\r\n                range: undefined,\r\n                value: this\r\n            },\r\n            show: {\r\n                type: input_types.BOOLEAN,\r\n                range: [0, 1],\r\n                value: this.show\r\n            }\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        return self.export_default_attributes()\r\n    }\r\n\r\n    export_animation_effects(self = this) {\r\n    }\r\n\r\n    export_state(self = this) {\r\n        return { ...this.track.export_state(), ...this.export_attributes() };\r\n    }\r\n\r\n}\r\n\r\nexport default GraphicalObject;\r\n","import { Box, Element, G, extend, off, on } from 'svg.js'\r\n// import { Box, Element, G, extend, off, on } from '@svgdotjs/svg.js'\r\n\r\n// const Box = SVG.Box;\r\n// const Element = SVG.Element;\r\n// const G = SVG.G;\r\n// const extend = SVG.extend;\r\n// const off = SVG.off;\r\n// const on = SVG.on;\r\nconst getCoordsFromEvent = (ev) => {\r\n  if (ev.changedTouches) {\r\n    ev = ev.changedTouches[0]\r\n  }\r\n  return { x: ev.clientX, y: ev.clientY }\r\n}\r\n\r\n// Creates handler, saves it\r\nclass DragHandler {\r\n  constructor(el) {\r\n    el.remember('_draggable', this)\r\n    this.el = el\r\n\r\n    this.drag = this.drag.bind(this)\r\n    this.startDrag = this.startDrag.bind(this)\r\n    this.endDrag = this.endDrag.bind(this)\r\n  }\r\n\r\n  // Enables or disabled drag based on input\r\n  init(enabled) {\r\n    if (enabled) {\r\n      this.el.on('mousedown.drag', this.startDrag)\r\n      this.el.on('touchstart.drag', this.startDrag)\r\n    } else {\r\n      this.el.off('mousedown.drag')\r\n      this.el.off('touchstart.drag')\r\n    }\r\n  }\r\n\r\n  // Start dragging\r\n  startDrag(ev) {\r\n    const isMouse = !ev.type.indexOf('mouse')\r\n\r\n    // Check for left button\r\n    if (isMouse && (ev.which || ev.buttons) !== 1) {\r\n      return\r\n    }\r\n\r\n    // Fire beforedrag event\r\n    if (this.el.fire('beforedrag', { event: ev, handler: this }).defaultPrevented) {\r\n      return\r\n    }\r\n\r\n    // Prevent browser drag behavior as soon as possible\r\n    ev.preventDefault()\r\n\r\n    // Prevent propagation to a parent that might also have dragging enabled\r\n    ev.stopPropagation()\r\n\r\n    // Make sure that start events are unbound so that one element\r\n    // is only dragged by one input only\r\n    this.init(false)\r\n\r\n    this.box = this.el.bbox()\r\n    this.lastClick = this.el.point(getCoordsFromEvent(ev))\r\n\r\n    // We consider the drag done, when a touch is canceled, too\r\n    const eventMove = (isMouse ? 'mousemove' : 'touchmove') + '.drag'\r\n    const eventEnd = (isMouse ? 'mouseup' : 'touchcancel.drag touchend') + '.drag'\r\n\r\n    // Bind drag and end events to window\r\n    on(window, eventMove, this.drag)\r\n    on(window, eventEnd, this.endDrag)\r\n\r\n    // Fire dragstart event\r\n    this.el.fire('dragstart', { event: ev, handler: this, box: this.box })\r\n  }\r\n\r\n  // While dragging\r\n  drag(ev) {\r\n\r\n    const { box, lastClick } = this\r\n\r\n    const currentClick = this.el.point(getCoordsFromEvent(ev))\r\n    const x = box.x + (currentClick.x - lastClick.x)\r\n    const y = box.y + (currentClick.y - lastClick.y)\r\n    const newBox = new Box(x, y, box.w, box.h)\r\n\r\n    if (this.el.fire('dragmove', {\r\n      event: ev,\r\n      handler: this,\r\n      box: newBox\r\n    }).defaultPrevented) return\r\n\r\n    this.move(x, y)\r\n    return newBox\r\n  }\r\n\r\n  move(x, y) {\r\n    // Svg elements bbox depends on their content even though they have\r\n    // x, y, width and height - strange!\r\n    // Thats why we handle them the same as groups\r\n    if (this.el.type === 'svg') {\r\n      G.prototype.move.call(this.el, x, y)\r\n    } else {\r\n      this.el.move(x, y)\r\n    }\r\n  }\r\n\r\n  endDrag(ev) {\r\n    // final drag\r\n    const box = this.drag(ev)\r\n\r\n    // fire dragend event\r\n    this.el.fire('dragend', { event: ev, handler: this, box })\r\n\r\n    // unbind events\r\n    off(window, 'mousemove.drag')\r\n    off(window, 'touchmove.drag')\r\n    off(window, 'mouseup.drag')\r\n    off(window, 'touchend.drag')\r\n\r\n    // Rebind initial Events\r\n    this.init(true)\r\n  }\r\n}\r\n\r\nextend(Element, {\r\n  draggable(enable = true) {\r\n    const dragHandler = this.remember('_draggable') || new DragHandler(this)\r\n    dragHandler.init(enable);\r\n    return this;\r\n  }\r\n})\r\n","import SVG from 'svg.js';\r\n\r\n// Our Object which manages drawing\r\n    function PaintHandler(el, event, options) {\r\n\r\n        this.el = el;\r\n        el.remember('_paintHandler', this);\r\n    \r\n        var _this = this,\r\n            plugin = this.getPlugin();\r\n\r\n        this.parent = el.parent(SVG.Nested) || el.parent(SVG.Doc);\r\n        this.p = this.parent.node.createSVGPoint(); // Helping point for coord transformation\r\n        this.m = null;  // transformation matrix. We get it when drawing starts\r\n        this.startPoint = null;\r\n        this.lastUpdateCall = null;\r\n        this.options = {};\r\n        this.set = new SVG.Set();\r\n\r\n        // Merge options and defaults\r\n        for (var i in this.el.draw.defaults) {\r\n            this.options[i] = this.el.draw.defaults[i];\r\n            if (typeof options[i] !== 'undefined') {\r\n                this.options[i] = options[i];\r\n            }\r\n        }\r\n        \r\n        if(plugin.point) {\r\n          plugin['pointPlugin'] = plugin.point;\r\n          delete plugin.point;\r\n        }\r\n        \r\n        // Import all methods from plugin into object\r\n        for (var i in plugin){\r\n            this[i] = plugin[i];\r\n        }\r\n        \r\n        // When we got an event, we use this for start, otherwise we use the click-event as default\r\n        if (!event) {\r\n            this.parent.on('click.draw', function (e) {\r\n                _this.start(e);\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n    PaintHandler.prototype.transformPoint = function(x, y){\r\n\r\n        this.p.x = x - (this.offset.x - window.pageXOffset);\r\n        this.p.y = y - (this.offset.y - window.pageYOffset);\r\n        \r\n        return this.p.matrixTransform(this.m);\r\n    \r\n    }\r\n    \r\n    PaintHandler.prototype.start = function (event) {\r\n    \r\n        var _this = this;\r\n    \r\n        // get the current transform matrix from screen to element (offset corrected)\r\n        this.m = this.el.node.getScreenCTM().inverse();\r\n\r\n        // we save the current scrolling-offset here\r\n        this.offset = { x: window.pageXOffset, y: window.pageYOffset };\r\n\r\n        // we want to snap in screen-coords, so we have to scale the snapToGrid accordingly\r\n        this.options.snapToGrid *= Math.sqrt(this.m.a * this.m.a + this.m.b * this.m.b)\r\n\r\n        // save the startpoint\r\n        this.startPoint = this.snapToGrid(this.transformPoint(event.clientX, event.clientY));\r\n\r\n        // the plugin may do some initial work\r\n        if(this.init){ this.init(event); }\r\n\r\n        // Fire our `drawstart`-event. We send the offset-corrected cursor-position along\r\n        this.el.fire('drawstart', {event:event, p:this.p, m:this.m});\r\n\r\n        // We need to bind the update-function to the mousemove event to keep track of the cursor\r\n        SVG.on(window, 'mousemove.draw', function (e) {\r\n            _this.update(e);\r\n        });\r\n\r\n        // Every consecutive call to start should map to point now\r\n        this.start = this.point;\r\n\r\n\r\n    };\r\n\r\n    // This function draws a point if the element is a polyline or polygon\r\n    // Otherwise it will just stop drawing the shape cause we are done\r\n    PaintHandler.prototype.point = function (event) {\r\n        if (this.point != this.start) return this.start(event);\r\n        \r\n        if (this.pointPlugin) {\r\n            return this.pointPlugin(event);\r\n        }\r\n    \r\n        // If this function is not overwritten we just call stop\r\n        this.stop(event);\r\n    };\r\n\r\n\r\n    // The stop-function does the cleanup work\r\n    PaintHandler.prototype.stop = function (event) {\r\n        if (event) {\r\n            this.update(event);\r\n        }\r\n        \r\n        // Plugin may want to clean something\r\n        if(this.clean){ this.clean(); }\r\n\r\n        // Unbind from all events\r\n        SVG.off(window, 'mousemove.draw');\r\n        this.parent.off('click.draw');\r\n\r\n        // remove Refernce to PaintHandler\r\n        this.el.forget('_paintHandler');\r\n\r\n        // overwrite draw-function since we never need it again for this element\r\n        this.el.draw = function () {\r\n        };\r\n\r\n        // Fire the `drawstop`-event\r\n        this.el.fire('drawstop');\r\n    };\r\n\r\n    // Updates the element while moving the cursor\r\n    PaintHandler.prototype.update = function (event) {\r\n\r\n        if(!event && this.lastUpdateCall){\r\n            event = this.lastUpdateCall;\r\n        }\r\n        \r\n        this.lastUpdateCall = event;\r\n        \r\n        // Get the current transform matrix\r\n        // it could have been changed since the start or the last update call\r\n        this.m = this.el.node.getScreenCTM().inverse();\r\n    \r\n        // Call the calc-function which calculates the new position and size\r\n        this.calc(event);\r\n\r\n        // Fire the `drawupdate`-event\r\n        this.el.fire('drawupdate', {event:event, p:this.p, m:this.m});\r\n    };\r\n\r\n    // Called from outside. Finishs a poly-element\r\n    PaintHandler.prototype.done = function () {\r\n        this.calc();\r\n        this.stop();\r\n\r\n        this.el.fire('drawdone');\r\n    };\r\n\r\n    // Called from outside. Cancels a poly-element\r\n    PaintHandler.prototype.cancel = function () {\r\n        // stop drawing and remove the element\r\n        this.stop();\r\n        this.el.remove();\r\n\r\n        this.el.fire('drawcancel');\r\n    };\r\n\r\n    // Calculate the corrected position when using `snapToGrid`\r\n    PaintHandler.prototype.snapToGrid = function (draw) {\r\n\r\n        var temp = null;\r\n\r\n        // An array was given. Loop through every element\r\n        if (draw.length) {\r\n            temp = [draw[0] % this.options.snapToGrid, draw[1] % this.options.snapToGrid];\r\n            draw[0] -= temp[0] < this.options.snapToGrid / 2 ? temp[0] : temp[0] - this.options.snapToGrid;\r\n            draw[1] -= temp[1] < this.options.snapToGrid / 2 ? temp[1] : temp[1] - this.options.snapToGrid;\r\n            return draw;\r\n        }\r\n\r\n        // Properties of element were given. Snap them all\r\n        for (var i in draw) {\r\n            temp = draw[i] % this.options.snapToGrid;\r\n            draw[i] -= (temp < this.options.snapToGrid / 2 ? temp : temp - this.options.snapToGrid) + (temp < 0 ? this.options.snapToGrid : 0);\r\n        }\r\n\r\n        return draw;\r\n    };\r\n\r\n    PaintHandler.prototype.param = function (key, value) {\r\n        this.options[key] = value === null ? this.el.draw.defaults[key] : value;\r\n        this.update();\r\n    };\r\n\r\n    // Returns the plugin\r\n    PaintHandler.prototype.getPlugin = function () {\r\n        return this.el.draw.plugins[this.el.type];\r\n    };\r\n\r\n    SVG.extend(SVG.Element, {\r\n        // Draw element with mouse\r\n        draw: function (event, options, value) {\r\n\r\n            // sort the parameters\r\n            if (!(event instanceof Event || typeof event === 'string')) {\r\n                options = event;\r\n                event = null;\r\n            }\r\n\r\n            // get the old Handler or create a new one from event and options\r\n            var paintHandler = this.remember('_paintHandler') || new PaintHandler(this, event, options || {});\r\n\r\n            // When we got an event we have to start/continue drawing\r\n            if (event instanceof Event) {\r\n                paintHandler['start'](event);\r\n            }\r\n\r\n            // if event is located in our PaintHandler we handle it as method\r\n            if (paintHandler[event]) {\r\n                paintHandler[event](options, value);\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n    });\r\n\r\n    // Default values. Can be changed for the whole project if needed\r\n    SVG.Element.prototype.draw.defaults = {\r\n        snapToGrid: 1        // Snaps to a grid of `snapToGrid` px\r\n    };\r\n\r\n    SVG.Element.prototype.draw.extend = function(name, obj){\r\n\r\n        var plugins = {};\r\n        if(typeof name === 'string'){\r\n            plugins[name] = obj;\r\n        }else{\r\n            plugins = name;\r\n        }\r\n\r\n        for(var shapes in plugins){\r\n            var shapesArr = shapes.trim().split(/\\s+/);\r\n\r\n            for(var i in shapesArr){\r\n                SVG.Element.prototype.draw.plugins[shapesArr[i]] = plugins[shapes];\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Container for all types not specified here\r\n    SVG.Element.prototype.draw.plugins = {};\r\n","import SVG from 'svg.js';\r\n\r\nSVG.Element.prototype.draw.extend('circle', {\r\n    \r\n        init:function(e){\r\n        \r\n            var p = this.startPoint;\r\n\r\n            this.el.attr({ cx: p.x, cy: p.y, r: 1 });\r\n        },\r\n\r\n        // We determine the radius by the cursor position\r\n        calc:function (e) {\r\n            \r\n            var p = this.transformPoint(e.clientX, e.clientY),\r\n                circle = {\r\n                    cx: this.startPoint.x,\r\n                    cy: this.startPoint.y,\r\n\r\n                    // calculating the radius\r\n                    r: Math.sqrt(\r\n                        (p.x - this.startPoint.x) * (p.x - this.startPoint.x) +\r\n                        (p.y - this.startPoint.y) * (p.y - this.startPoint.y)\r\n                    )\r\n            };\r\n            \r\n            this.snapToGrid(circle);\r\n            this.el.attr(circle);\r\n        }\r\n        \r\n    });","import SVG from 'svg.js';\r\n\r\nSVG.Element.prototype.draw.extend('ellipse', {\r\n    \r\n        init:function(e){\r\n            // We start with a circle with radius 1 at the position of the cursor\r\n            var p = this.startPoint;\r\n\r\n            this.el.attr({ cx: p.x, cy: p.y, rx: 1, ry: 1 });\r\n            \r\n        },\r\n\r\n        calc:function (e) {\r\n            var p = this.transformPoint(e.clientX, e.clientY);\r\n        \r\n            var ellipse = {\r\n                cx: this.startPoint.x,\r\n                cy: this.startPoint.y,\r\n                rx: Math.abs(p.x - this.startPoint.x),\r\n                ry: Math.abs(p.y - this.startPoint.y)\r\n            };\r\n            \r\n            this.snapToGrid(ellipse);\r\n            this.el.attr(ellipse);\r\n        }\r\n        \r\n    });","import SVG from 'svg.js';\r\n\r\nSVG.Element.prototype.draw.extend('line polyline polygon', {\r\n\r\n        init:function(e){\r\n            // When we draw a polygon, we immediately need 2 points.\r\n            // One start-point and one point at the mouse-position\r\n\r\n            this.set = new SVG.Set();\r\n\r\n            var p = this.startPoint,\r\n                arr = [\r\n                    [p.x, p.y],\r\n                    [p.x, p.y]\r\n                ];\r\n\r\n            this.el.plot(arr);\r\n\r\n            // We draw little circles around each point\r\n            // This is absolutely not needed and maybe removed in a later release\r\n            this.drawCircles();\r\n\r\n        },\r\n\r\n\r\n        // The calc-function sets the position of the last point to the mouse-position (with offset ofc)\r\n        calc:function (e) {\r\n            var arr = this.el.array().valueOf();\r\n            arr.pop();\r\n\r\n            if (e) {\r\n                var p = this.transformPoint(e.clientX, e.clientY);\r\n                arr.push(this.snapToGrid([p.x, p.y]));\r\n            }\r\n\r\n            this.el.plot(arr);\r\n            this.drawCircles();\r\n        },\r\n\r\n        point:function(e){\r\n\r\n            if (this.el.type.indexOf('poly') > -1) {\r\n                // Add the new Point to the point-array\r\n                var p = this.transformPoint(e.clientX, e.clientY),\r\n                    arr = this.el.array().valueOf();\r\n\r\n                arr.push(this.snapToGrid([p.x, p.y]));\r\n\r\n                this.el.plot(arr);\r\n                this.drawCircles();\r\n\r\n                // Fire the `drawpoint`-event, which holds the coords of the new Point\r\n                this.el.fire('drawpoint', {event:e, p:{x:p.x, y:p.y}, m:this.m});\r\n\r\n                return;\r\n            }\r\n\r\n            // We are done, if the element is no polyline or polygon\r\n            this.stop(e);\r\n\r\n        },\r\n\r\n        clean:function(){\r\n\r\n            // Remove all circles\r\n            this.set.each(function () {\r\n                this.remove();\r\n            });\r\n\r\n            this.set.clear();\r\n\r\n            delete this.set;\r\n\r\n        },\r\n\r\n        drawCircles:function () {\r\n            var array = this.el.array().valueOf()\r\n\r\n            this.set.each(function () {\r\n                this.remove();\r\n            });\r\n\r\n            this.set.clear();\r\n\r\n            for (var i = 0; i < array.length; ++i) {\r\n\r\n                this.p.x = array[i][0]\r\n                this.p.y = array[i][1]\r\n\r\n                var p = this.p.matrixTransform(this.parent.node.getScreenCTM().inverse().multiply(this.el.node.getScreenCTM()));\r\n\r\n                this.set.add(this.parent.circle(5).stroke({width: 1}).fill('#ccc').center(p.x, p.y));\r\n            }\r\n        },\r\n\r\n        undo:function() {\r\n            if (this.set.length()) {\r\n                this.set.members.splice(-2, 1)[0].remove();\r\n                this.el.array().value.splice(-2, 1);\r\n                this.el.plot(this.el.array());\r\n                this.el.fire('undopoint');\r\n            }\r\n        },\r\n    });\r\n","import SVG from 'svg.js';\r\n\r\nSVG.Element.prototype.draw.extend('rect image', {\r\n\r\n    init: function (e) {\r\n\r\n        var p = this.startPoint;\r\n\r\n        this.el.attr({ x: p.x, y: p.y, height: 0, width: 0 });\r\n    },\r\n\r\n    calc: function (e) {\r\n\r\n        var rect = {\r\n            x: this.startPoint.x,\r\n            y: this.startPoint.y\r\n        }, p = this.transformPoint(e.clientX, e.clientY);\r\n\r\n        rect.width = p.x - rect.x;\r\n        rect.height = p.y - rect.y;\r\n\r\n        // Snap the params to the grid we specified\r\n        this.snapToGrid(rect);\r\n\r\n        // When width is less than zero, we have to draw to the left\r\n        // which means we have to move the start-point to the left\r\n        if (rect.width < 0) {\r\n            rect.x = rect.x + rect.width;\r\n            rect.width = -rect.width;\r\n        }\r\n\r\n        // ...same with height\r\n        if (rect.height < 0) {\r\n            rect.y = rect.y + rect.height;\r\n            rect.height = -rect.height;\r\n        }\r\n\r\n        // draw the element\r\n        this.el.attr(rect);\r\n    }\r\n\r\n});\r\n","import SVG from 'svg.js';\r\n\r\n (function () {\r\n\r\n    function ResizeHandler(el) {\r\n\r\n        el.remember('_resizeHandler', this);\r\n\r\n        this.el = el;\r\n        this.parameters = {};\r\n        this.lastUpdateCall = null;\r\n        this.p = el.doc().node.createSVGPoint();\r\n    }\r\n\r\n    ResizeHandler.prototype.transformPoint = function (x, y, m) {\r\n\r\n        this.p.x = x - (this.offset.x - window.pageXOffset);\r\n        this.p.y = y - (this.offset.y - window.pageYOffset);\r\n\r\n        return this.p.matrixTransform(m || this.m);\r\n\r\n    };\r\n\r\n    ResizeHandler.prototype._extractPosition = function (event) {\r\n        // Extract a position from a mouse/touch event.\r\n        // Returns { x: .., y: .. }\r\n        return {\r\n            x: event.clientX != null ? event.clientX : event.touches[0].clientX,\r\n            y: event.clientY != null ? event.clientY : event.touches[0].clientY\r\n        }\r\n    };\r\n\r\n    ResizeHandler.prototype.init = function (options) {\r\n\r\n        var _this = this;\r\n\r\n        this.stop();\r\n\r\n        if (options === 'stop') {\r\n            return;\r\n        }\r\n\r\n        this.options = {};\r\n\r\n        // Merge options and defaults\r\n        for (var i in this.el.resize.defaults) {\r\n            this.options[i] = this.el.resize.defaults[i];\r\n            if (typeof options[i] !== 'undefined') {\r\n                this.options[i] = options[i];\r\n            }\r\n        }\r\n\r\n        // We listen to all these events which are specifying different edges\r\n        this.el.on('lt.resize', function (e) { _this.resize(e || window.event); });  // Left-Top\r\n        this.el.on('rt.resize', function (e) { _this.resize(e || window.event); });  // Right-Top\r\n        this.el.on('rb.resize', function (e) { _this.resize(e || window.event); });  // Right-Bottom\r\n        this.el.on('lb.resize', function (e) { _this.resize(e || window.event); });  // Left-Bottom\r\n\r\n        this.el.on('t.resize', function (e) { _this.resize(e || window.event); });   // Top\r\n        this.el.on('r.resize', function (e) { _this.resize(e || window.event); });   // Right\r\n        this.el.on('b.resize', function (e) { _this.resize(e || window.event); });   // Bottom\r\n        this.el.on('l.resize', function (e) { _this.resize(e || window.event); });   // Left\r\n\r\n        this.el.on('rot.resize', function (e) { _this.resize(e || window.event); }); // Rotation\r\n\r\n        this.el.on('point.resize', function (e) { _this.resize(e || window.event); }); // Point-Moving\r\n\r\n        // This call ensures, that the plugin reacts to a change of snapToGrid immediately\r\n        this.update();\r\n\r\n    };\r\n\r\n    ResizeHandler.prototype.stop = function () {\r\n        this.el.off('lt.resize');\r\n        this.el.off('rt.resize');\r\n        this.el.off('rb.resize');\r\n        this.el.off('lb.resize');\r\n\r\n        this.el.off('t.resize');\r\n        this.el.off('r.resize');\r\n        this.el.off('b.resize');\r\n        this.el.off('l.resize');\r\n\r\n        this.el.off('rot.resize');\r\n\r\n        this.el.off('point.resize');\r\n\r\n        return this;\r\n    };\r\n\r\n    ResizeHandler.prototype.resize = function (event) {\r\n        var _this = this;\r\n        this.m = this.el.node.getScreenCTM().inverse();\r\n        this.offset = { x: window.pageXOffset, y: window.pageYOffset };\r\n\r\n        var txPt = this._extractPosition(event.detail.event);\r\n        this.parameters = {\r\n            type: this.el.type, // the type of element\r\n            p: this.transformPoint(txPt.x, txPt.y),\r\n            x: event.detail.x,      // x-position of the mouse when resizing started\r\n            y: event.detail.y,      // y-position of the mouse when resizing started\r\n            box: this.el.bbox(),    // The bounding-box of the element\r\n            rotation: this.el.transform().rotation  // The current rotation of the element\r\n        };\r\n\r\n        // Add font-size parameter if the element type is text\r\n        if (this.el.type === \"text\") {\r\n            this.parameters.fontSize = this.el.attr()[\"font-size\"];\r\n        }\r\n\r\n        // the i-param in the event holds the index of the point which is moved, when using `deepSelect`\r\n        if (event.detail.i !== undefined) {\r\n\r\n            // get the point array\r\n            var array = this.el.array().valueOf();\r\n\r\n            // Save the index and the point which is moved\r\n            this.parameters.i = event.detail.i;\r\n            this.parameters.pointCoords = [array[event.detail.i][0], array[event.detail.i][1]];\r\n        }\r\n\r\n        // Lets check which edge of the bounding-box was clicked and resize the this.el according to this\r\n        switch (event.type) {\r\n\r\n            // Left-Top-Edge\r\n            case 'lt':\r\n                // We build a calculating function for every case which gives us the new position of the this.el\r\n                this.calc = function (diffX, diffY) {\r\n                    // The procedure is always the same\r\n                    // First we snap the edge to the given grid (snapping to 1px grid is normal resizing)\r\n                    var snap = this.snapToGrid(diffX, diffY);\r\n\r\n                    // Now we check if the new height and width still valid (> 0)\r\n                    if (this.parameters.box.width - snap[0] > 0 && this.parameters.box.height - snap[1] > 0) {\r\n                        // ...if valid, we resize the this.el (which can include moving because the coord-system starts at the left-top and this edge is moving sometimes when resized)\r\n\r\n                        /*\r\n                         * but first check if the element is text box, so we can change the font size instead of\r\n                         * the width and height\r\n                         */\r\n\r\n                        if (this.parameters.type === \"text\") {\r\n                            this.el.move(this.parameters.box.x + snap[0], this.parameters.box.y);\r\n                            this.el.attr(\"font-size\", this.parameters.fontSize - snap[0]);\r\n                            return;\r\n                        }\r\n\r\n                        snap = this.checkAspectRatio(snap);\r\n\r\n                        this.el.move(this.parameters.box.x + snap[0], this.parameters.box.y + snap[1]).size(this.parameters.box.width - snap[0], this.parameters.box.height - snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Right-Top\r\n            case 'rt':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 1 << 1);\r\n                    if (this.parameters.box.width + snap[0] > 0 && this.parameters.box.height - snap[1] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            this.el.move(this.parameters.box.x - snap[0], this.parameters.box.y);\r\n                            this.el.attr(\"font-size\", this.parameters.fontSize + snap[0]);\r\n                            return;\r\n                        }\r\n\r\n                        snap = this.checkAspectRatio(snap, true);\r\n\r\n                        this.el.move(this.parameters.box.x, this.parameters.box.y + snap[1]).size(this.parameters.box.width + snap[0], this.parameters.box.height - snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Right-Bottom\r\n            case 'rb':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 0);\r\n                    if (this.parameters.box.width + snap[0] > 0 && this.parameters.box.height + snap[1] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            this.el.move(this.parameters.box.x - snap[0], this.parameters.box.y);\r\n                            this.el.attr(\"font-size\", this.parameters.fontSize + snap[0]);\r\n                            return;\r\n                        }\r\n\r\n                        snap = this.checkAspectRatio(snap);\r\n\r\n                        this.el.move(this.parameters.box.x, this.parameters.box.y).size(this.parameters.box.width + snap[0], this.parameters.box.height + snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Left-Bottom\r\n            case 'lb':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 1);\r\n                    if (this.parameters.box.width - snap[0] > 0 && this.parameters.box.height + snap[1] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            this.el.move(this.parameters.box.x + snap[0], this.parameters.box.y);\r\n                            this.el.attr(\"font-size\", this.parameters.fontSize - snap[0]);\r\n                            return;\r\n                        }\r\n\r\n                        snap = this.checkAspectRatio(snap, true);\r\n\r\n                        this.el.move(this.parameters.box.x + snap[0], this.parameters.box.y).size(this.parameters.box.width - snap[0], this.parameters.box.height + snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Top\r\n            case 't':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 1 << 1);\r\n                    if (this.parameters.box.height - snap[1] > 0) {\r\n                        // Disable the font-resizing if it is not from the corner of bounding-box\r\n                        if (this.parameters.type === \"text\") {\r\n                            return;\r\n                        }\r\n\r\n                        this.el.move(this.parameters.box.x, this.parameters.box.y + snap[1]).height(this.parameters.box.height - snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Right\r\n            case 'r':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 0);\r\n                    if (this.parameters.box.width + snap[0] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            return;\r\n                        }\r\n\r\n                        this.el.move(this.parameters.box.x, this.parameters.box.y).width(this.parameters.box.width + snap[0]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Bottom\r\n            case 'b':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 0);\r\n                    if (this.parameters.box.height + snap[1] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            return;\r\n                        }\r\n\r\n                        this.el.move(this.parameters.box.x, this.parameters.box.y).height(this.parameters.box.height + snap[1]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Left\r\n            case 'l':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n                    var snap = this.snapToGrid(diffX, diffY, 1);\r\n                    if (this.parameters.box.width - snap[0] > 0) {\r\n                        if (this.parameters.type === \"text\") {\r\n                            return;\r\n                        }\r\n\r\n                        this.el.move(this.parameters.box.x + snap[0], this.parameters.box.y).width(this.parameters.box.width - snap[0]);\r\n                    }\r\n                };\r\n                break;\r\n\r\n            // Rotation\r\n            case 'rot':\r\n                // s.a.\r\n                this.calc = function (diffX, diffY) {\r\n\r\n                    // yes this is kinda stupid but we need the mouse coords back...\r\n                    var current = { x: diffX + this.parameters.p.x, y: diffY + this.parameters.p.y };\r\n\r\n                    // start minus middle\r\n                    var sAngle = Math.atan2((this.parameters.p.y - this.parameters.box.y - this.parameters.box.height / 2), (this.parameters.p.x - this.parameters.box.x - this.parameters.box.width / 2));\r\n\r\n                    // end minus middle\r\n                    var pAngle = Math.atan2((current.y - this.parameters.box.y - this.parameters.box.height / 2), (current.x - this.parameters.box.x - this.parameters.box.width / 2));\r\n\r\n                    var angle = this.parameters.rotation + (pAngle - sAngle) * 180 / Math.PI + this.options.snapToAngle / 2;\r\n\r\n                    // We have to move the element to the center of the box first and change the rotation afterwards\r\n                    // because rotation always works around a rotation-center, which is changed when moving the element\r\n                    // We also set the new rotation center to the center of the box.\r\n                    this.el.center(this.parameters.box.cx, this.parameters.box.cy).rotate(angle - (angle % this.options.snapToAngle), this.parameters.box.cx, this.parameters.box.cy);\r\n                };\r\n                break;\r\n\r\n            // Moving one single Point (needed when an element is deepSelected which means you can move every single point of the object)\r\n            case 'point':\r\n                this.calc = function (diffX, diffY) {\r\n\r\n                    // Snapping the point to the grid\r\n                    var snap = this.snapToGrid(diffX, diffY, this.parameters.pointCoords[0], this.parameters.pointCoords[1]);\r\n\r\n                    // Get the point array\r\n                    var array = this.el.array().valueOf();\r\n\r\n                    // Changing the moved point in the array\r\n                    array[this.parameters.i][0] = this.parameters.pointCoords[0] + snap[0];\r\n                    array[this.parameters.i][1] = this.parameters.pointCoords[1] + snap[1];\r\n\r\n                    // And plot the new this.el\r\n                    this.el.plot(array);\r\n                };\r\n        }\r\n\r\n        this.el.fire('resizestart', { dx: this.parameters.x, dy: this.parameters.y, event: event });\r\n        // When resizing started, we have to register events for...\r\n        // Touches.\r\n        SVG.on(window, 'touchmove.resize', function (e) {\r\n            _this.update(e || window.event);\r\n        });\r\n        SVG.on(window, 'touchend.resize', function () {\r\n            _this.done();\r\n        });\r\n        // Mouse.\r\n        SVG.on(window, 'mousemove.resize', function (e) {\r\n            _this.update(e || window.event);\r\n        });\r\n        SVG.on(window, 'mouseup.resize', function () {\r\n            _this.done();\r\n        });\r\n\r\n    };\r\n\r\n    // The update-function redraws the element every time the mouse is moving\r\n    ResizeHandler.prototype.update = function (event) {\r\n        if (!event) {\r\n            if (this.lastUpdateCall) {\r\n                this.calc(this.lastUpdateCall[0], this.lastUpdateCall[1]);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Calculate the difference between the mouseposition at start and now\r\n        var txPt = this._extractPosition(event);\r\n        var p = this.transformPoint(txPt.x, txPt.y);\r\n\r\n        var diffX = p.x - this.parameters.p.x,\r\n            diffY = p.y - this.parameters.p.y;\r\n\r\n        this.lastUpdateCall = [diffX, diffY];\r\n\r\n        // Calculate the new position and height / width of the element\r\n        this.calc(diffX, diffY);\r\n\r\n        // Emit an event to say we have changed.\r\n        this.el.fire('resizing', { dx: diffX, dy: diffY, event: event });\r\n        // \r\n        // var sibling = SVG.adopt(document.getElementById(this.el.node.getAttribute('target_id')));\r\n\r\n        // sibling.attr(\"height\", this.el.attr(\"height\"));\r\n        // sibling.attr(\"x\", this.el.attr(\"x\"));\r\n\r\n        // sibling.attr(\"y\", this.el.attr(\"y\"));\r\n\r\n        // .setAttribute(\"width\", 1000 + Math.abs(diffX));\r\n\r\n    };\r\n\r\n    // Is called on mouseup.\r\n    // Removes the update-function from the mousemove event\r\n    ResizeHandler.prototype.done = function () {\r\n        this.lastUpdateCall = null;\r\n        SVG.off(window, 'mousemove.resize');\r\n        SVG.off(window, 'mouseup.resize');\r\n        SVG.off(window, 'touchmove.resize');\r\n        SVG.off(window, 'touchend.resize');\r\n        this.el.fire('resizedone');\r\n    };\r\n\r\n    // The flag is used to determine whether the resizing is used with a left-Point (first bit) and top-point (second bit)\r\n    // In this cases the temp-values are calculated differently\r\n    ResizeHandler.prototype.snapToGrid = function (diffX, diffY, flag, pointCoordsY) {\r\n\r\n        var temp;\r\n\r\n        // If `pointCoordsY` is given, a single Point has to be snapped (deepSelect). That's why we need a different temp-value\r\n        if (typeof pointCoordsY !== 'undefined') {\r\n            // Note that flag = pointCoordsX in this case\r\n            temp = [(flag + diffX) % this.options.snapToGrid, (pointCoordsY + diffY) % this.options.snapToGrid];\r\n        } else {\r\n            // We check if the flag is set and if not we set a default-value (both bits set - which means upper-left-edge)\r\n            flag = flag == null ? 1 | 1 << 1 : flag;\r\n            temp = [(this.parameters.box.x + diffX + (flag & 1 ? 0 : this.parameters.box.width)) % this.options.snapToGrid, (this.parameters.box.y + diffY + (flag & (1 << 1) ? 0 : this.parameters.box.height)) % this.options.snapToGrid];\r\n        }\r\n\r\n        if (diffX < 0) {\r\n            temp[0] -= this.options.snapToGrid;\r\n        }\r\n        if (diffY < 0) {\r\n            temp[1] -= this.options.snapToGrid;\r\n        }\r\n\r\n        diffX -= (Math.abs(temp[0]) < this.options.snapToGrid / 2 ?\r\n            temp[0] :\r\n            temp[0] - (diffX < 0 ? -this.options.snapToGrid : this.options.snapToGrid));\r\n        diffY -= (Math.abs(temp[1]) < this.options.snapToGrid / 2 ?\r\n            temp[1] :\r\n            temp[1] - (diffY < 0 ? -this.options.snapToGrid : this.options.snapToGrid));\r\n\r\n        return this.constraintToBox(diffX, diffY, flag, pointCoordsY);\r\n\r\n    };\r\n\r\n    // keep element within constrained box\r\n    ResizeHandler.prototype.constraintToBox = function (diffX, diffY, flag, pointCoordsY) {\r\n        //return [diffX, diffY]\r\n        var c = this.options.constraint || {};\r\n        var orgX, orgY;\r\n\r\n        if (typeof pointCoordsY !== 'undefined') {\r\n            orgX = flag;\r\n            orgY = pointCoordsY;\r\n        } else {\r\n            orgX = this.parameters.box.x + (flag & 1 ? 0 : this.parameters.box.width);\r\n            orgY = this.parameters.box.y + (flag & (1 << 1) ? 0 : this.parameters.box.height);\r\n        }\r\n\r\n        if (typeof c.minX !== 'undefined' && orgX + diffX < c.minX) {\r\n            diffX = c.minX - orgX;\r\n        }\r\n\r\n        if (typeof c.maxX !== 'undefined' && orgX + diffX > c.maxX) {\r\n            diffX = c.maxX - orgX;\r\n        }\r\n\r\n        if (typeof c.minY !== 'undefined' && orgY + diffY < c.minY) {\r\n            diffY = c.minY - orgY;\r\n        }\r\n\r\n        if (typeof c.maxY !== 'undefined' && orgY + diffY > c.maxY) {\r\n            diffY = c.maxY - orgY;\r\n        }\r\n\r\n        return [diffX, diffY];\r\n    };\r\n\r\n    ResizeHandler.prototype.checkAspectRatio = function (snap, isReverse) {\r\n        if (!this.options.saveAspectRatio) {\r\n            return snap;\r\n        }\r\n\r\n        var updatedSnap = snap.slice();\r\n        var aspectRatio = this.parameters.box.width / this.parameters.box.height;\r\n        var newW = this.parameters.box.width + snap[0];\r\n        var newH = this.parameters.box.height - snap[1];\r\n        var newAspectRatio = newW / newH;\r\n\r\n        if (newAspectRatio < aspectRatio) {\r\n            // Height is too big. Adapt it\r\n            updatedSnap[1] = newW / aspectRatio - this.parameters.box.height;\r\n            isReverse && (updatedSnap[1] = -updatedSnap[1]);\r\n        } else if (newAspectRatio > aspectRatio) {\r\n            // Width is too big. Adapt it\r\n            updatedSnap[0] = this.parameters.box.width - newH * aspectRatio;\r\n            isReverse && (updatedSnap[0] = -updatedSnap[0]);\r\n        }\r\n\r\n        return updatedSnap;\r\n    };\r\n\r\n    SVG.extend(SVG.Element, {\r\n        // Resize element with mouse\r\n        resize: function (options) {\r\n\r\n            (this.remember('_resizeHandler') || new ResizeHandler(this)).init(options || {});\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    });\r\n\r\n    SVG.Element.prototype.resize.defaults = {\r\n        snapToAngle: 0.1,       // Specifies the speed the rotation is happening when moving the mouse\r\n        snapToGrid: 1,          // Snaps to a grid of `snapToGrid` Pixels\r\n        constraint: {},         // keep element within constrained box\r\n        saveAspectRatio: false  // Save aspect ratio when resizing using lt, rt, rb or lb points\r\n    };\r\n\r\n}).call(this);\r\n","import SVG from 'svg.js';\r\n\r\nfunction SelectHandler(el) {\r\n\r\n    this.el = el;\r\n    el.remember('_selectHandler', this);\r\n    this.pointSelection = { isSelected: false };\r\n    this.rectSelection = { isSelected: false };\r\n\r\n    // helper list with position settings of each type of point\r\n    this.pointsList = {\r\n        lt: [0, 0],\r\n        rt: ['width', 0],\r\n        rb: ['width', 'height'],\r\n        lb: [0, 'height'],\r\n        t: ['width', 0],\r\n        r: ['width', 'height'],\r\n        b: ['width', 'height'],\r\n        l: [0, 'height']\r\n    };\r\n\r\n    // helper function to get point coordinates based on settings above and an object (bbox in our case)\r\n    this.pointCoord = function (setting, object, isPointCentered) {\r\n        var coord = typeof setting !== 'string' ? setting : object[setting];\r\n        // Top, bottom, right and left points are placed in the center of element width/height\r\n        return isPointCentered ? coord / 2 : coord\r\n    }\r\n\r\n    this.pointCoords = function (point, object) {\r\n        var settings = this.pointsList[point];\r\n\r\n        return {\r\n            x: this.pointCoord(settings[0], object, (point === 't' || point === 'b')),\r\n            y: this.pointCoord(settings[1], object, (point === 'r' || point === 'l'))\r\n        }\r\n    }\r\n}\r\n\r\nSelectHandler.prototype.init = function (value, options) {\r\n\r\n    var bbox = this.el.bbox();\r\n    this.options = {};\r\n\r\n    // store defaults list of points in order to verify users config\r\n    var points = this.el.selectize.defaults.points;\r\n\r\n    // Merging the defaults and the options-object together\r\n    for (var i in this.el.selectize.defaults) {\r\n        this.options[i] = this.el.selectize.defaults[i];\r\n        if (options[i] !== undefined) {\r\n            this.options[i] = options[i];\r\n        }\r\n    }\r\n\r\n    // prepare & validate list of points to be added (or excluded)\r\n    var pointsLists = ['points', 'pointsExclude'];\r\n\r\n    for (var i in pointsLists) {\r\n        var option = this.options[pointsLists[i]];\r\n\r\n        if (typeof option === 'string') {\r\n            if (option.length > 0) {\r\n                // if set as comma separated string list => convert it into an array\r\n                option = option.split(/\\s*,\\s*/i);\r\n            } else {\r\n                option = [];\r\n            }\r\n        } else if (typeof option === 'boolean' && pointsLists[i] === 'points') {\r\n            // this is not needed, but let's have it for legacy support\r\n            option = option ? points : [];\r\n        }\r\n\r\n        this.options[pointsLists[i]] = option;\r\n    }\r\n\r\n    // intersect correct all points options with users config (exclude unwanted points)\r\n    // ES5 -> NO arrow functions nor Array.includes()\r\n    this.options.points = [points, this.options.points].reduce(\r\n        function (a, b) {\r\n            return a.filter(\r\n                function (c) {\r\n                    return b.indexOf(c) > -1;\r\n                }\r\n            )\r\n        }\r\n    );\r\n\r\n    // exclude pointsExclude, if wanted\r\n    this.options.points = [this.options.points, this.options.pointsExclude].reduce(\r\n        function (a, b) {\r\n            return a.filter(\r\n                function (c) {\r\n                    return b.indexOf(c) < 0;\r\n                }\r\n            )\r\n        }\r\n    );\r\n\r\n    this.parent = this.el.parent();\r\n    this.nested = (this.nested || this.parent.group());\r\n    this.nested.matrix(new SVG.Matrix(this.el).translate(bbox.x, bbox.y));\r\n\r\n    // When deepSelect is enabled and the element is a line/polyline/polygon, draw only points for moving\r\n    if (this.options.deepSelect && ['line', 'polyline', 'polygon'].indexOf(this.el.type) !== -1) {\r\n        this.selectPoints(value);\r\n    } else {\r\n        this.selectRect(value);\r\n    }\r\n\r\n    this.observe();\r\n    this.cleanup();\r\n\r\n};\r\n\r\nSelectHandler.prototype.selectPoints = function (value) {\r\n\r\n    this.pointSelection.isSelected = value;\r\n\r\n    // When set is already there we dont have to create one\r\n    if (this.pointSelection.set) {\r\n        return this;\r\n    }\r\n\r\n    // Create our set of elements\r\n    this.pointSelection.set = this.parent.set();\r\n    // draw the points and mark the element as selected\r\n    this.drawPoints();\r\n\r\n    return this;\r\n\r\n};\r\n\r\n// create the point-array which contains the 2 points of a line or simply the points-array of polyline/polygon\r\nSelectHandler.prototype.getPointArray = function () {\r\n    var bbox = this.el.bbox();\r\n\r\n    return this.el.array().valueOf().map(function (el) {\r\n        return [el[0] - bbox.x, el[1] - bbox.y];\r\n    });\r\n};\r\n\r\n// Draws a points \r\nSelectHandler.prototype.drawPoints = function () {\r\n\r\n    var _this = this, array = this.getPointArray();\r\n\r\n    // go through the array of points\r\n    for (var i = 0, len = array.length; i < len; ++i) {\r\n\r\n        var curriedEvent = (function (k) {\r\n            return function (ev) {\r\n                ev = ev || window.event;\r\n                ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\r\n                ev.stopPropagation();\r\n\r\n                var x = ev.pageX || ev.touches[0].pageX;\r\n                var y = ev.pageY || ev.touches[0].pageY;\r\n                _this.el.fire('point', { x: x, y: y, i: k, event: ev });\r\n            };\r\n        })(i);\r\n\r\n        // add every point to the set\r\n        // add css-classes and a touchstart-event which fires our event for moving points\r\n        var point = this.drawPoint(array[i][0], array[i][1])\r\n            .addClass(this.options.classPoints)\r\n            .addClass(this.options.classPoints + '_point')\r\n            .on('touchstart', curriedEvent)\r\n            .on('mousedown', curriedEvent)\r\n        this.pointSelection.set.add(point);\r\n    }\r\n};\r\n\r\n// The function to draw single point\r\nSelectHandler.prototype.drawPoint = function (cx, cy) {\r\n    var pointType = this.options.pointType;\r\n\r\n    switch (pointType) {\r\n        case 'circle':\r\n            return this.drawCircle(cx, cy);\r\n        case 'rect':\r\n            return this.drawRect(cx, cy);\r\n        default:\r\n            if (typeof pointType === 'function') {\r\n                return pointType.call(this, cx, cy);\r\n            }\r\n\r\n            throw new Error('Unknown ' + pointType + ' point type!');\r\n    }\r\n};\r\n\r\n// The function to draw the circle point\r\nSelectHandler.prototype.drawCircle = function (cx, cy) {\r\n    return this.nested.circle(this.options.pointSize)\r\n        .stroke(this.options.pointStroke)\r\n        .fill(this.options.pointFill)\r\n        .center(cx, cy);\r\n};\r\n\r\n// The function to draw the rect point\r\nSelectHandler.prototype.drawRect = function (cx, cy) {\r\n    return this.nested.rect(this.options.pointSize, this.options.pointSize)\r\n        .stroke(this.options.pointStroke)\r\n        .fill(this.options.pointFill)\r\n        .center(cx, cy);\r\n};\r\n\r\n// every time a point is moved, we have to update the positions of our point\r\nSelectHandler.prototype.updatePointSelection = function () {\r\n    var array = this.getPointArray();\r\n\r\n    this.pointSelection.set.each(function (i) {\r\n        if (this.cx() === array[i][0] && this.cy() === array[i][1]) {\r\n            return;\r\n        }\r\n        this.center(array[i][0], array[i][1]);\r\n    });\r\n};\r\n\r\nSelectHandler.prototype.updateRectSelection = function () {\r\n    var _this = this, bbox = this.el.bbox();\r\n\r\n    this.rectSelection.set.get(0).attr({\r\n        width: bbox.width,\r\n        height: bbox.height\r\n    });\r\n\r\n    // set.get(1) is always in the upper left corner. no need to move it\r\n    if (this.options.points.length) {\r\n        this.options.points.map(function (point, index) {\r\n            var coords = _this.pointCoords(point, bbox);\r\n\r\n            _this.rectSelection.set.get(index + 1).center(coords.x, coords.y);\r\n        });\r\n    }\r\n\r\n    if (this.options.rotationPoint) {\r\n        var length = this.rectSelection.set.length();\r\n\r\n        this.rectSelection.set.get(length - 1).center(bbox.width / 2, 20);\r\n    }\r\n};\r\n\r\nSelectHandler.prototype.selectRect = function (value) {\r\n\r\n    var _this = this, bbox = this.el.bbox();\r\n\r\n    this.rectSelection.isSelected = value;\r\n\r\n    // when set is already p\r\n    this.rectSelection.set = this.rectSelection.set || this.parent.set();\r\n\r\n    // helperFunction to create a mouse-down function which triggers the event specified in `eventName`\r\n    function getMoseDownFunc(eventName) {\r\n        return function (ev) {\r\n            ev = ev || window.event;\r\n            ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\r\n            ev.stopPropagation();\r\n\r\n            var x = ev.pageX || ev.touches[0].pageX;\r\n            var y = ev.pageY || ev.touches[0].pageY;\r\n            _this.el.fire(eventName, { x: x, y: y, event: ev });\r\n        };\r\n    }\r\n\r\n    // create the selection-rectangle and add the css-class\r\n    if (!this.rectSelection.set.get(0)) {\r\n        this.rectSelection.set.add(this.nested.rect(bbox.width, bbox.height).addClass(this.options.classRect));\r\n    }\r\n\r\n    // Draw Points at the edges, if enabled\r\n    if (this.options.points.length && this.rectSelection.set.length() < 2) {\r\n        var ename = \"touchstart\", mname = \"mousedown\";\r\n\r\n        this.options.points.map(function (point, index) {\r\n            var coords = _this.pointCoords(point, bbox);\r\n\r\n            var pointElement = _this.drawPoint(coords.x, coords.y)\r\n                .attr('class', _this.options.classPoints + '_' + point)\r\n                .on(mname, getMoseDownFunc(point))\r\n                .on(ename, getMoseDownFunc(point));\r\n            _this.rectSelection.set.add(pointElement);\r\n        });\r\n\r\n        this.rectSelection.set.each(function () {\r\n            this.addClass(_this.options.classPoints);\r\n        });\r\n    }\r\n\r\n    // draw rotationPint, if enabled\r\n    if (this.options.rotationPoint && ((this.options.points && !this.rectSelection.set.get(9)) || (!this.options.points && !this.rectSelection.set.get(1)))) {\r\n\r\n        var curriedEvent = function (ev) {\r\n            ev = ev || window.event;\r\n            ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\r\n            ev.stopPropagation();\r\n\r\n            var x = ev.pageX || ev.touches[0].pageX;\r\n            var y = ev.pageY || ev.touches[0].pageY;\r\n            _this.el.fire('rot', { x: x, y: y, event: ev });\r\n        };\r\n\r\n        var pointElement = this.drawPoint(bbox.width / 2, 20)\r\n            .attr('class', this.options.classPoints + '_rot')\r\n            .on(\"touchstart\", curriedEvent)\r\n            .on(\"mousedown\", curriedEvent);\r\n        this.rectSelection.set.add(pointElement);\r\n    }\r\n\r\n};\r\n\r\nSelectHandler.prototype.handler = function () {\r\n\r\n    var bbox = this.el.bbox();\r\n    this.nested.matrix(new SVG.Matrix(this.el).translate(bbox.x, bbox.y));\r\n\r\n    if (this.rectSelection.isSelected) {\r\n        this.updateRectSelection();\r\n    }\r\n\r\n    if (this.pointSelection.isSelected) {\r\n        this.updatePointSelection();\r\n    }\r\n\r\n};\r\n\r\nSelectHandler.prototype.observe = function () {\r\n    var _this = this;\r\n\r\n    if (MutationObserver) {\r\n        if (this.rectSelection.isSelected || this.pointSelection.isSelected) {\r\n            this.observerInst = this.observerInst || new MutationObserver(function () {\r\n                _this.handler();\r\n            });\r\n            this.observerInst.observe(this.el.node, { attributes: true });\r\n        } else {\r\n            try {\r\n                this.observerInst.disconnect();\r\n                delete this.observerInst;\r\n            } catch (e) {\r\n            }\r\n        }\r\n    } else {\r\n        this.el.off('DOMAttrModified.select');\r\n\r\n        if (this.rectSelection.isSelected || this.pointSelection.isSelected) {\r\n            this.el.on('DOMAttrModified.select', function () {\r\n                _this.handler();\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nSelectHandler.prototype.cleanup = function () {\r\n\r\n    //var _this = this;\r\n\r\n    if (!this.rectSelection.isSelected && this.rectSelection.set) {\r\n        // stop watching the element, remove the selection\r\n        this.rectSelection.set.each(function () {\r\n            this.remove();\r\n        });\r\n\r\n        this.rectSelection.set.clear();\r\n        delete this.rectSelection.set;\r\n    }\r\n\r\n    if (!this.pointSelection.isSelected && this.pointSelection.set) {\r\n        // Remove all points, clear the set, stop watching the element\r\n        this.pointSelection.set.each(function () {\r\n            this.remove();\r\n        });\r\n\r\n        this.pointSelection.set.clear();\r\n        delete this.pointSelection.set;\r\n    }\r\n\r\n    if (!this.pointSelection.isSelected && !this.rectSelection.isSelected) {\r\n        this.nested.remove();\r\n        delete this.nested;\r\n\r\n    }\r\n};\r\n\r\n\r\nSVG.extend(SVG.Element, {\r\n    // Select element with mouse\r\n    selectize: function (value, options) {\r\n\r\n        // Check the parameters and reassign if needed\r\n        if (typeof value === 'object') {\r\n            options = value;\r\n            value = true;\r\n        }\r\n\r\n        var selectHandler = this.remember('_selectHandler') || new SelectHandler(this);\r\n\r\n        selectHandler.init(value === undefined ? true : value, options || {});\r\n\r\n        return this;\r\n\r\n    }\r\n});\r\n\r\nSVG.Element.prototype.selectize.defaults = {\r\n    points: ['lt', 'rt', 'rb', 'lb', 't', 'r', 'b', 'l'],    // which points to draw, default all\r\n    // points: ['lt', 'rt', 'rb', 'lb', 't', 'r', 'b', 'l'],    // which points to draw, default all\r\n    pointsExclude: [],                       // easier option if to exclude few than rewrite all\r\n    classRect: 'svg_select_boundingRect',    // Css-class added to the rect\r\n    classPoints: 'svg_select_points',        // Css-class added to the points\r\n    pointSize: 7,                            // size of point\r\n    rotationPoint: false,                     // If true, rotation point is drawn. Needed for rotation!\r\n    deepSelect: false,                       // If true, moving of single points is possible (only line, polyline, polyon)\r\n    pointType: 'rect',                     // Point type: circle or rect, default circle\r\n    pointFill: \"#000\",                       // Point fill color\r\n    pointStroke: { width: 1, color: \"#000\" } // Point stroke properties\r\n};\r\n","import '../SVG_plugins/svg.draggable';\r\nimport '../SVG_plugins/svg.draw';\r\nimport '../SVG_plugins/circle';\r\nimport '../SVG_plugins/ellipse';\r\nimport '../SVG_plugins/lineable';\r\nimport '../SVG_plugins/rectable';\r\nimport '../SVG_plugins/svg.resize';\r\nimport '../SVG_plugins/svg.select';\r\nimport * as d3 from \"d3\";\r\nimport { store } from '../../index';\r\nimport { editAttribute, setObject } from '../../actions/index';\r\nimport GraphicalObject from './GraphicalObject';\r\nimport SVG from 'svg.js';\r\nimport { scene } from \"../Scene\";\r\n\r\nclass GraphObject extends GraphicalObject {\r\n    constructor(x, y, width, height, type, name, bounding_box) {\r\n        super(x, y, width, height, name);\r\n        this.type = \"Rectangle\";\r\n        this.svg_container = null;\r\n        this.construct_svg_container();\r\n        this.bounding_box = bounding_box;\r\n        this.SVG_reference = SVG.adopt(document.getElementById(this.unique_id));\r\n        this.set_on_click();\r\n    }\r\n\r\n\r\n    set_on_click(self = this) {\r\n        this.bounding_box.on('click', e => {\r\n            scene.set_curr_graphical_object(this);\r\n            store.dispatch(setObject(this));\r\n        })\r\n    }\r\n    construct_svg_container(self = this) {\r\n        // create svg container\r\n        self.svg_container = d3.select(\"#canvas\")\r\n            .append(\"svg\")\r\n            .attr(\"width\", this.total_width)\r\n            .attr(\"height\", this.total_height)\r\n            .attr(\"x\", this.x)\r\n            .attr(\"y\", this.y)\r\n            .attr(\"opacity\", this.opacity)\r\n            .attr(\"id\", self.unique_id);\r\n        self.svg_container.attr('viewBox', `0 0 ${this.total_width} ${this.total_height}`)\r\n            .attr('preserveAspectRatio', 'none')\r\n    }\r\n\r\n    select(self = this) {\r\n        this.bounding_box.draggable().selectize().resize();\r\n        this.bounding_box.on('dragend', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            // events are still bound e.g. dragend will fire anyway\r\n        })\r\n        this.bounding_box.on('resizedone', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            store.dispatch(editAttribute(this, 'width', this.bounding_box.attr('width')));\r\n            store.dispatch(editAttribute(this, 'height', this.bounding_box.attr('height')));\r\n        })\r\n\r\n        this.bounding_box.on('resizing', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n        });\r\n        this.bounding_box.on('dragmove', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n\r\n        });\r\n    }\r\n\r\n    deselect(self = this) {\r\n        this.bounding_box.selectize(false).draggable(false).resize(false);;\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default GraphObject;\r\n\r\n\r\n","import GraphicalObject from './GraphicalObject';\r\nimport SVG from 'svg.js';\r\nimport { input_types } from \"../Scene\";\r\nimport '../SVG_plugins/svg.draggable';\r\nimport '../SVG_plugins/svg.draw';\r\nimport '../SVG_plugins/circle';\r\nimport '../SVG_plugins/ellipse';\r\nimport '../SVG_plugins/lineable';\r\nimport '../SVG_plugins/rectable';\r\nimport '../SVG_plugins/svg.resize';\r\nimport '../SVG_plugins/svg.select';\r\nimport { store } from '../../index';\r\nimport { editAttribute, setObject, addObject } from '../../actions/index';\r\n\r\nclass RectObject extends GraphicalObject {\r\n    constructor(x, y, width, height, name, rect) {\r\n        super(x, y, width, height, name);\r\n        this.type = \"Rectangle\";\r\n        this.opacity = 0.1;\r\n        this.SVG_reference = rect;\r\n        this.SVG_reference.attr(\"id\", this.unique_id);\r\n        this.set_on_click();\r\n        this.styling = '\"fill\":\"#e4f1fe\",\"stroke\":\"black\",\"stroke-width\":\"2\"';\r\n        this.apply_string_style();\r\n        store.dispatch(addObject(this));\r\n        store.dispatch(setObject(this));\r\n        this.SVG_reference.on('dragend', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.SVG_reference.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.SVG_reference.attr('y')));\r\n            // events are still bound e.g. dragend will fire anyway\r\n        })\r\n        this.SVG_reference.on('resizedone', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.SVG_reference.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.SVG_reference.attr('y')));\r\n            store.dispatch(editAttribute(this, 'width', this.SVG_reference.attr('width')));\r\n            store.dispatch(editAttribute(this, 'height', this.SVG_reference.attr('height')));\r\n        })\r\n    }\r\n\r\n\r\n\r\n    select(self = this) {\r\n        this.SVG_reference.draggable().selectize().resize();\r\n\r\n    }\r\n    deselect(self = this) {\r\n        this.SVG_reference.selectize(false).draggable(false).resize(false);;\r\n    }\r\n\r\n    static create(callback, self = this) {\r\n        const drawing = SVG.adopt(document.getElementById('canvas'));\r\n        // first, let's clear all other listener on drawing\r\n        drawing.off('mousedown');\r\n        drawing.off('mouseup');\r\n\r\n        var rect;\r\n        const start_draw = (e) => {\r\n            rect = drawing.rect();\r\n            rect.attr(\"fill\", \"#e4f1fe\");\r\n            rect.attr(\"stroke\", \"black\");\r\n            rect.attr(\"stroke-width\", \"2\");\r\n            rect.draw(e);\r\n        }\r\n        const end_draw = (e) => {\r\n            rect.draw('stop', e);\r\n            // add the circle to the list of new objects\r\n            var x = rect.x();\r\n            var y = rect.y();\r\n            var width = rect.attr('width');\r\n            var height = rect.attr('height');\r\n            // should be some sort of dispatch action here\r\n            const new_rect = new RectObject(x, y, width, height, \"test_rectangle\", rect);\r\n            // unbind the listener\r\n            drawing.off('mousedown', start_draw);\r\n            drawing.off('mouseup', end_draw);\r\n        }\r\n        drawing.on('mousedown', start_draw, false);\r\n        drawing.on('mouseup', end_draw, false);\r\n    }\r\n\r\n\r\n\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            type: \"Rectangle\",\r\n            tooltips: \"This is a rectangle\",\r\n            icon_representation: \"fa-square\",\r\n            create_fn: RectObject.create\r\n        }\r\n    }\r\n\r\n    edit_attr(d, self = this) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"additional_styling\":\r\n                this.styling = value;\r\n                this.apply_string_style();\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    apply_string_style(self = this) {\r\n        try {\r\n            let style_dict = JSON.parse(\"{\" + this.styling + \"}\");\r\n            console.log(style_dict);\r\n            for (let style in style_dict) {\r\n                self.SVG_reference.attr(style, style_dict[style]);\r\n            }\r\n        }\r\n        catch (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n            additional_styling: {\r\n                type: input_types.TEXT_AREA,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.styling\r\n            },\r\n        }\r\n        return { ...this.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\n\r\nexport default RectObject;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import GraphicalObject from './GraphicalObject';\r\nimport SVG from 'svg.js';\r\nimport '../SVG_plugins/svg.draggable';\r\nimport '../SVG_plugins/svg.draw';\r\nimport '../SVG_plugins/circle';\r\nimport '../SVG_plugins/ellipse';\r\nimport '../SVG_plugins/lineable';\r\nimport '../SVG_plugins/rectable';\r\nimport '../SVG_plugins/svg.resize';\r\nimport '../SVG_plugins/svg.select';\r\nimport { store } from '../../index';\r\nimport { editAttribute, setObject, addObject } from '../../actions/index'\r\nimport { input_types, generate_unique_id } from \"../Scene\";\r\n\r\nclass CircleObject extends GraphicalObject {\r\n    constructor(cx, cy, r, name, circle) {\r\n        const x = cx - r;\r\n        const y = cy - r;\r\n        super(x, y, r * 2, r * 2, name);\r\n        this.r = r;\r\n        this.cx = cx;\r\n        this.cy = cy;\r\n        this.type = \"Circle\";\r\n        this.SVG_reference = circle;\r\n        this.SVG_reference.attr(\"id\", this.unique_id);\r\n        this.set_on_click();\r\n        this.styling = '\"fill\":\"#e4f1fe\",\"stroke\":\"black\",\"stroke-width\":\"2\"';\r\n        store.dispatch(addObject(this));\r\n        store.dispatch(setObject(this));\r\n        this.SVG_reference.on('dragend', (e) => {\r\n            store.dispatch(editAttribute(this, 'cx', this.SVG_reference.attr('cx')));\r\n            store.dispatch(editAttribute(this, 'cy', this.SVG_reference.attr('cy')));\r\n            // events are still bound e.g. dragend will fire anyway\r\n        })\r\n        this.SVG_reference.on('resizedone', (e) => {\r\n            store.dispatch(editAttribute(this, 'cx', this.SVG_reference.attr('cx')));\r\n            store.dispatch(editAttribute(this, 'cy', this.SVG_reference.attr('cy')));\r\n            store.dispatch(editAttribute(this, 'r', this.SVG_reference.attr('r')));\r\n        })\r\n\r\n    }\r\n\r\n    select(self = this) {\r\n        this.SVG_reference.draggable().selectize().resize();\r\n\r\n    }\r\n\r\n    deselect(self = this) {\r\n        this.SVG_reference.selectize(false).draggable(false).resize(false);;\r\n    }\r\n\r\n    static create(callback, self = this) {\r\n        const drawing = SVG.adopt(document.getElementById('canvas'));\r\n        // first, let's clear all other listener on drawing\r\n        drawing.off('mousedown');\r\n        drawing.off('mouseup');\r\n        var circle;\r\n        const start_draw = (e) => {\r\n            circle = drawing.circle();\r\n            circle.attr(\"fill\", \"#e4f1fe\");\r\n            circle.attr(\"stroke\", \"black\");\r\n            circle.attr(\"stroke-width\", \"2\");\r\n            circle.draw(e);\r\n        }\r\n        const end_draw = (e) => {\r\n            circle.draw('stop', e);\r\n            // add the circle to the list of new objects\r\n            var cx = circle.attr('cx');\r\n            var cy = circle.attr('cy');\r\n            var r = circle.attr('r');\r\n            console.log(cx, cy, r);\r\n            // should be some sort of dispatch action here\r\n            const new_circle = new CircleObject(cx, cy, r, 'test_circle', circle);\r\n            // unbind the listener\r\n            drawing.off('mousedown', start_draw);\r\n            drawing.off('mouseup', end_draw);\r\n        }\r\n        drawing.on('mousedown', start_draw, false);\r\n        drawing.on('mouseup', end_draw, false);\r\n    }\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"cx\":\r\n                this.cx = value;\r\n                this.SVG_reference\r\n                    .attr(\"cx\", this.cx);\r\n                return;\r\n            case \"cy\":\r\n                this.cy = value;\r\n                this.SVG_reference\r\n                    .attr(\"cy\", this.cy);\r\n                return;\r\n            case 'radius':\r\n                this.r = value;\r\n                this.SVG_reference.attr('r', this.r);\r\n                break;\r\n            case \"additional_styling\":\r\n                this.styling = value;\r\n                this.apply_string_style();\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    apply_string_style(self = this) {\r\n        try {\r\n            let style_dict = JSON.parse(\"{\" + this.styling + \"}\");\r\n            console.log(style_dict);\r\n            for (let style in style_dict) {\r\n                self.SVG_reference.attr(style, style_dict[style]);\r\n            }\r\n        }\r\n        catch (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        return {\r\n            name: {\r\n                type: input_types.STRING,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.name\r\n            },\r\n            radius: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.r,\r\n            },\r\n            cx: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.cx\r\n            },\r\n            cy: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                value: this.cy\r\n            },\r\n            opacity: {\r\n                type: input_types.FLOAT,\r\n                range: [0, 1],\r\n                value: this.opacity\r\n            },\r\n            reference_object: {\r\n                type: undefined,\r\n                range: undefined,\r\n                value: this\r\n            },\r\n\r\n            show: {\r\n                type: input_types.BOOLEAN,\r\n                range: [true, false],\r\n                value: this.show\r\n            },\r\n            additional_styling: {\r\n                type: input_types.TEXT_AREA,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.styling\r\n            },\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            type: \"Circle\",\r\n            tooltips: \"This is a circle\",\r\n            icon_representation: \"fa-circle\",\r\n            create_fn: CircleObject.create\r\n        }\r\n    }\r\n}\r\n\r\nexport default CircleObject;","\r\nimport GraphObject from './GraphObject';\r\nimport '../SVG_plugins/svg.draggable';\r\nimport '../SVG_plugins/svg.draw';\r\nimport '../SVG_plugins/circle';\r\nimport '../SVG_plugins/ellipse';\r\nimport '../SVG_plugins/lineable';\r\nimport '../SVG_plugins/rectable';\r\nimport '../SVG_plugins/svg.resize';\r\nimport '../SVG_plugins/svg.select';\r\nimport * as d3 from \"d3\";\r\nimport { store } from '../../index';\r\nimport { editAttribute, setObject, addObject } from '../../actions/index'\r\nimport { input_types } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport WebFont from 'webfontloader';\r\n\r\nclass TextObject extends GraphObject {\r\n    constructor(x, y, width, height, name, text, bounding_box) {\r\n        super(x, y, width, height, 'Text', name, bounding_box);\r\n        const drawing = SVG.adopt(document.getElementById('canvas'));\r\n        this.data = text;\r\n        this.text = drawing.text(text);\r\n        this.SVG_reference.add(this.text);\r\n        this.font_family = \"Lobster\";\r\n        this.font_styling = '\"size\":\"30\",\"style\":\"normal\"';\r\n        this.apply_string_style();\r\n        store.dispatch(addObject(this));\r\n        store.dispatch(setObject(this));\r\n        let self = this;\r\n        this.bounding_box.on('dragend', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            // events are still bound e.g. dragend will fire anyway\r\n        })\r\n        this.bounding_box.on('resizedone', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            store.dispatch(editAttribute(this, 'width', this.bounding_box.attr('width')));\r\n            store.dispatch(editAttribute(this, 'height', this.bounding_box.attr('height')));\r\n        })\r\n\r\n        this.bounding_box.on('resizing', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n        });\r\n        this.bounding_box.on('dragmove', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n\r\n        });\r\n    }\r\n\r\n    select(self = this) {\r\n        this.bounding_box.draggable().selectize().resize();\r\n\r\n    }\r\n\r\n    deselect(self = this) {\r\n        this.bounding_box.selectize(false).draggable(false).resize(false);;\r\n    }\r\n\r\n    static create(callback, self = this) {\r\n        const drawing = SVG.adopt(document.getElementById('canvas'));\r\n        // first, let's clear all other listener on drawing\r\n        drawing.off('mousedown');\r\n        drawing.off('mouseup');\r\n\r\n        var rect;\r\n        const start_draw = (e) => {\r\n            rect = drawing.rect();\r\n            rect.draw(e);\r\n            rect.attr(\"fill\", \"none\");\r\n            rect.attr(\"stroke\", \"black\");\r\n            rect.attr(\"stroke-width\", \"2\");\r\n        }\r\n        const end_draw = (e) => {\r\n            rect.draw('stop', e);\r\n            // add the circle to the list of new objects\r\n            var x = rect.x();\r\n            var y = rect.y();\r\n            var width = rect.attr('width');\r\n            var height = rect.attr('height');\r\n            // should be some sort of dispatch action here\r\n            rect.addClass('bounding-box');\r\n            const new_rect = new TextObject(x, y, width, height, \"test_rectangle\", 'dummy text', rect);\r\n            // unbind the listener\r\n            drawing.off('mousedown', start_draw);\r\n            drawing.off('mouseup', end_draw);\r\n        }\r\n        drawing.on('mousedown', start_draw, false);\r\n        drawing.on('mouseup', end_draw, false);\r\n    }\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            type: \"Text\",\r\n            tooltips: \"This is a Text box\",\r\n            icon_representation: \"fa-font\",\r\n            create_fn: TextObject.create\r\n        }\r\n    }\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"font_styling\":\r\n                this.font_styling = value;\r\n                this.apply_string_style();\r\n                return;\r\n            case \"name\":\r\n                this.text.text(value);\r\n                this.data = value;\r\n                return;\r\n            case \"family\":\r\n                this.font_family = value;\r\n                this.apply_string_style();\r\n                return;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.SVG_reference\r\n            .attr('viewBox', `0 0 ${this.total_width} ${this.total_height}`);\r\n    }\r\n\r\n    apply_string_style(self = this) {\r\n        WebFont.load({\r\n            google: {\r\n                families: [this.font_family]\r\n            }\r\n        });\r\n        try {\r\n            let style_dict = JSON.parse(\"{\" + this.font_styling + \"}\");\r\n            this.text.font(style_dict);\r\n            this.text.font('family', this.font_family)\r\n        }\r\n        catch (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n            name: {\r\n                type: input_types.STRING,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.text.text()\r\n            },\r\n            family: {\r\n                type: input_types.STRING,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.font_family\r\n            },\r\n            font_style: {\r\n                type: input_types.TEXT_AREA,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.font_styling\r\n            },\r\n        }\r\n        return { ...this.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\nexport default TextObject;\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/sales.ed1a4444.csv\";","import { input_types, generate_unique_id } from \"../Scene\";\r\n\r\nclass AnimationEffect {\r\n    /**\r\n    * \r\n    * @param {*} name the name of the effect\r\n    * @param {*} actor the actor that the effect is applied to\r\n    * @param {*} duration the duration of the effect. If not applicable, then is -1\r\n    * @param {*} target_component the component of the actor to target. targetable components can be access from the actor \r\n    * @param {*} exclusive true if when this effect is active, no other effect can be active. False otherwise\r\n    */\r\n    constructor(name, effect_stack, exclusive = true) {\r\n        this.effect_stack = effect_stack;\r\n        this.name = name;\r\n        this.actor = effect_stack.actor;\r\n        this.duration = effect_stack.duration;\r\n        // must be a list of pure DOM 3elements\r\n        this.DOM_target_components = [document.getElementById(this.actor.name)];\r\n        this.exclusive = exclusive;\r\n        this.enabled = 1;\r\n        this.unique_id = \"AnimationEffect_\" + generate_unique_id();\r\n        this.DOM_target_components = [this.actor.svg_container.node()];\r\n    }\r\n\r\n    set_target_component(target_component, self = this) {\r\n        if (target_component in this.actor.get_targetable_components()) {\r\n            self.target_component = target_component;\r\n            return 1;\r\n        }\r\n        else {\r\n            console.log(\"there is no such component\");\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    set_actor(actor) {\r\n        this.actor = actor;\r\n    }\r\n    set_exclusiveness(exclusive) {\r\n        this.exclusive = exclusive;\r\n    }\r\n\r\n    set_effect_stack(effect_stack, self = this) {\r\n        this.effect_stack = effect_stack;\r\n    }\r\n    get_targetable_components(self = this) {\r\n        return self.actor.get_targetable_components();\r\n    }\r\n\r\n    set_duration(duration) {\r\n        this.duration = duration;\r\n    }\r\n\r\n\r\n    static get_name() {\r\n        return this.name;\r\n    }\r\n\r\n    reachTo(timestamp = 0, self = this) {\r\n        return;\r\n    }\r\n    play(start_timestamp = 0, self = this) {\r\n        return;\r\n    }\r\n    pause(self = this) {\r\n        return;\r\n    }\r\n\r\n    resume(self = this) {\r\n        return;\r\n    }\r\n\r\n    stop(self = this) {\r\n        return;\r\n    }\r\n\r\n    edit_default_attr(d) {\r\n        if (!d) return;\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"name\":\r\n                this.name = value;\r\n                return;\r\n            case \"enabled\":\r\n                this.enabled = value;\r\n                this.reconstruct_graph();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    reconstruct_graph() {\r\n        return\r\n    };\r\n    edit_attr(d) {\r\n        this.edit_default_attr(d);\r\n    }\r\n\r\n    export_default_attributes(self = this) {\r\n        return {\r\n            name: {\r\n                type: input_types.CONST,\r\n                range: \"\",\r\n                tooltips: \"The name of the the effect\",\r\n                value: this.name\r\n            },\r\n            enabled: {\r\n                type: input_types.BOOLEAN,\r\n                range: [0, 1],\r\n                value: this.enabled,\r\n            },\r\n            reference_object: {\r\n                type: null,\r\n                range: null,\r\n                value: this,\r\n            }\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        return self.export_default_attributes()\r\n    }\r\n\r\n    export_state(self = this) {\r\n        return this.export_attributes();\r\n    }\r\n}\r\n\r\nexport default AnimationEffect;\r\n\r\n\r\n\r\n\r\n\r\n","import { input_types } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport AnimationEffect from '../DefaultEffects/AnimationEffect';\r\n\r\nclass MoveEffect extends AnimationEffect {\r\n    constructor(effect_stack) {\r\n        super(\"MoveTo\", effect_stack, true);\r\n        this.start_x = this.actor.x;\r\n        this.start_y = this.actor.y;\r\n        this.end_x = this.actor.x;\r\n        this.end_y = this.actor.y;\r\n        this.targetable_components =\r\n            {\r\n                CONTAINER: 'CONTAINER',\r\n                'X AXIS': 'X AXIS',\r\n                'y AXIS': 'Y AXIS',\r\n                'XY AXIS': 'XY AXIS',\r\n                'BAR': 'BAR'\r\n            }\r\n        this.curr_target_component = this.DOM_target_components.CONTAINER;\r\n        this.DOM_target_components = [this.actor.svg_container.node()];\r\n    }\r\n\r\n    reachTo(timestamp = 0, self = this) {\r\n        if (!self.enabled) return;\r\n        if (timestamp < 0 || timestamp >= self.duration) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            // clear out all animations\r\n            svg_e.play();\r\n            svg_e.stop();\r\n            // get current position based on start_timestamp\r\n            const start_x = self.start_x + (self.end_x - self.start_x) * timestamp / self.duration;\r\n            const start_y = self.start_y + (self.end_y - self.start_y) * timestamp / self.duration;\r\n            svg_e.x(start_x);\r\n            svg_e.y(start_y);\r\n        });\r\n    }\r\n\r\n    play(start_timestamp = 0, self = this) {\r\n        self.reachTo(0);\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.animate(self.duration - start_timestamp).move(self.end_x, self.end_y);\r\n        });\r\n    }\r\n\r\n    pause(self = this) {\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.pause();\r\n        });\r\n    }\r\n\r\n    resume(self = this) {\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.play();\r\n        });\r\n    }\r\n\r\n    stop(self = this) {\r\n        this.reachTo(0);\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.stop();\r\n        });\r\n        self.actor.SVG_reference.show();\r\n\r\n    }\r\n\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            name: \"Move\",\r\n            tooltips: \"Move an object from a starting location to an end location\",\r\n            icon_representation: \"\",\r\n            create_fn: MoveEffect.create\r\n        }\r\n    }\r\n\r\n    static create(effect_stack, self = this) {\r\n        const effect = new MoveEffect(effect_stack);\r\n        return effect;\r\n    }\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"start_x\":\r\n                this.start_x = value;\r\n                return;\r\n            case \"end_x\":\r\n                this.end_x = value;\r\n                return;\r\n            case \"start_y\":\r\n                this.start_y = value;\r\n                return;\r\n            case \"end_y\":\r\n                this.end_y = value;\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n            start_x: {\r\n                type: input_types.CONST,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The beginning x position\",\r\n                value: this.start_x\r\n            },\r\n            end_x: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The beginning x position\",\r\n                value: this.end_x\r\n            },\r\n            start_y: {\r\n                type: input_types.CONST,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The beginning x position\",\r\n                value: this.start_y\r\n            },\r\n            end_y: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The beginning x position\",\r\n                value: this.end_y\r\n            },\r\n        }\r\n        return { ...self.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\n\r\nexport default MoveEffect;\r\n","import { input_types } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport AnimationEffect from '../DefaultEffects/AnimationEffect';\r\n\r\nclass FadeEffect extends AnimationEffect {\r\n    constructor(effect_stack) {\r\n        super(\"Fade Effect\", effect_stack, true);\r\n        this.original_opacity = this.actor.opacity;\r\n        this.start_opacity = this.actor.opacity;\r\n        this.end_opacity = this.actor.opacity;\r\n        this.targetable_components =\r\n            {\r\n                CONTAINER: 'CONTAINER',\r\n                'X AXIS': 'X AXIS',\r\n                'y AXIS': 'Y AXIS',\r\n                'XY AXIS': 'XY AXIS',\r\n                'BAR': 'BAR'\r\n            }\r\n        this.curr_target_component = this.DOM_target_components.CONTAINER;\r\n        this.DOM_target_components = [this.actor.svg_container.node()];\r\n        this.reachTo(0);\r\n    }\r\n\r\n    reachTo(timestamp = 0, self = this) {\r\n        if (!self.enabled) return;\r\n\r\n        if (timestamp < 0 || timestamp >= self.duration) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.play();\r\n            svg_e.stop();\r\n            // get current position based on start_timestamp\r\n            const curr_opacity = self.start_opacity + (self.end_opacity - self.start_opacity) * timestamp / self.duration;\r\n            svg_e.opacity(curr_opacity);\r\n        });\r\n    }\r\n\r\n    play(start_timestamp = 0, self = this) {\r\n        self.reachTo(0);\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            // clear out all animations\r\n            svg_e.animate(self.duration - start_timestamp).opacity(self.end_opacity);\r\n\r\n        });\r\n    }\r\n\r\n    pause(self = this) {\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.pause();\r\n        });\r\n    }\r\n\r\n    resume(self = this) {\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.play();\r\n        });\r\n    }\r\n\r\n    stop(self = this) {\r\n        if (!self.enabled) return;\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            svg_e.stop();\r\n        });\r\n        self.actor.SVG_reference.show();\r\n\r\n    }\r\n\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            name: \"Fade\",\r\n            tooltips: \"Fade an object from opacity to another opacity\",\r\n            icon_representation: \"\",\r\n            create_fn: FadeEffect.create\r\n        }\r\n    }\r\n\r\n    static create(effect_stack, self = this) {\r\n        const effect = new FadeEffect(effect_stack);\r\n        return effect;\r\n    }\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"start_opacity\":\r\n                this.start_opacity = value;\r\n                return;\r\n            case \"end_opacity\":\r\n                this.end_opacity = value;\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    reconstruct_graph(self = this) {\r\n        this.DOM_target_components.forEach(e => {\r\n            var svg_e = SVG.adopt(e);\r\n            // clear out all animations\r\n            svg_e.opacity(self.original_opacity);\r\n        });\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n            start_opacity: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The beginning opacity\",\r\n                value: this.start_opacity\r\n            },\r\n            end_opacity: {\r\n                type: input_types.INT,\r\n                range: [-Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\r\n                tooltips: \"The end opacity\",\r\n                value: this.end_opacity\r\n            },\r\n        }\r\n        return { ...self.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\n\r\nexport default FadeEffect;\r\n","import { input_types } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport AnimationEffect from '../DefaultEffects/AnimationEffect';\r\nimport * as d3 from 'd3';\r\nclass BarGrowByOne extends AnimationEffect {\r\n    constructor(effect_stack) {\r\n        super(\"BarGrowByOne\", effect_stack, true);\r\n        this.bars = this.actor.bars;\r\n        this.graph_height = this.actor.graph_height;\r\n        this.y_scale = this.actor.y_scale;\r\n        this.y_data = this.actor.y_data;\r\n        this.curr_percent = 0;\r\n        this.reachTo(0);\r\n    }\r\n\r\n    reachTo(timestamp = 0, self = this) {\r\n        if (!self.enabled) return;\r\n        self.bars\r\n            .attr(\"y\", function (d, i) {\r\n                const per = timestamp / self.duration;\r\n                const curr_y = self.y_scale(d[self.y_data] * per);\r\n                return curr_y;\r\n\r\n            })\r\n            .attr(\"height\", function (d, i) {\r\n                const per = timestamp / self.duration;\r\n                const curr_y = self.y_scale(d[self.y_data] * per);\r\n                const curr_height = self.graph_height - curr_y;\r\n                return curr_height;\r\n            });\r\n    }\r\n\r\n    play(start_timestamp = 0, self = this) {\r\n        if (!self.enabled) return;\r\n        self.reachTo(start_timestamp);\r\n        self.bars.attr(\"T\", 0);\r\n        self.bars.transition()\r\n            .duration(self.duration - start_timestamp)\r\n            .attr(\"y\", function (d) { return self.y_scale(d[self.y_data]); })\r\n            .attr('T', 1)\r\n            .attr(\"height\", function (d) {\r\n                return self.graph_height - self.y_scale(d[self.y_data]);\r\n            })\r\n    }\r\n\r\n    pause(self = this) {\r\n        self.bars.interrupt();\r\n        this.curr_percent = self.bars.attr('T');\r\n    }\r\n    resume(self = this) {\r\n        if (!self.enabled) return;\r\n        // load the new time stamp\r\n        let time_stamp = this.curr_percent * this.duration;\r\n        console.log(time_stamp);\r\n        this.play(time_stamp);\r\n    }\r\n\r\n    stop(self = this) {\r\n        this.reachTo(0);\r\n        self.bars.interrupt();\r\n        self.actor.SVG_reference.show();\r\n    }\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            name: \"Bar Grow\",\r\n            tooltips: \"Make the bar grow from 0 to full height\",\r\n            icon_representation: \"\",\r\n            create_fn: BarGrowByOne.create\r\n        }\r\n    }\r\n\r\n    static create(effect_stack, self = this) {\r\n        const effect = new BarGrowByOne(effect_stack);\r\n        return effect;\r\n    }\r\n\r\n    reconstruct_graph(self = this) {\r\n        this.bars.attr(\"y\", function (d) { return self.y_scale(d[self.y_data]); })\r\n            .attr(\"height\", function (d) {\r\n                return self.graph_height - self.y_scale(d[self.y_data]);\r\n            });\r\n        this.reachTo(0);\r\n    }\r\n\r\n\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"start_per\":\r\n                this.start_per = value;\r\n                return;\r\n            case \"end_per\":\r\n                this.end_per = value;\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n        }\r\n        return { ...self.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\n\r\nexport default BarGrowByOne;\r\n","import { input_types } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport AnimationEffect from '../DefaultEffects/AnimationEffect';\r\nimport * as d3 from 'd3';\r\nclass BarSort extends AnimationEffect {\r\n    constructor(effect_stack) {\r\n        super(\"Bar Sort\", effect_stack, true);\r\n        this.bars = this.actor.bars;\r\n        this.graph_height = this.actor.graph_height;\r\n        this.y_scale = this.actor.y_scale;\r\n        this.x_scale = this.actor.x_scale;\r\n        this.y_data = this.actor.y_data;\r\n        this.x_data = this.actor.x_data;\r\n        this.x_axis = this.actor.x_axis;\r\n        this.curr_percent = 0;\r\n        this.DOM_target_components = [this.actor.svg_container.node()];\r\n        this.data = JSON.parse(JSON.stringify(this.actor.data));\r\n        // this.reachTo(0);\r\n    }\r\n\r\n    reachTo(timestamp = 0, self = this) {\r\n        return;\r\n    }\r\n\r\n    play(start_timestamp = 0, self = this) {\r\n        if (!self.enabled) return;\r\n        self.data.sort((a, b) => a[self.y_data] - b[self.y_data]);\r\n        self.x_scale.domain(self.data.map(d => d[self.x_data]));\r\n        const t = this.actor.svg_container.transition()\r\n            .duration(this.duration - this.data.length * 50)\r\n        this.bars.data(self.data, d => d[self.x_data])\r\n            .transition(t)\r\n            .delay((d, i) => i * 20)\r\n            .attr(\"x\", function (d) { return self.x_scale(d[self.x_data]) + 5; })\r\n        this.x_axis.transition(t)\r\n            .call(d3.axisBottom(self.x_scale))\r\n            .selectAll(\".x_axis\")\r\n            .delay((d, i) => i * 20);\r\n    }\r\n\r\n    pause(self = this) {\r\n        return;\r\n    }\r\n    resume(self = this) {\r\n        if (!self.enabled) return;\r\n        return;\r\n    }\r\n\r\n    stop(self = this) {\r\n        self.actor.SVG_reference.show();\r\n        this.bars.interrupt();\r\n        self.data = JSON.parse(JSON.stringify(this.actor.data));\r\n        self.x_scale.domain(self.data.map(d => d[self.x_data]));\r\n        this.bars.data(self.data, d => d[self.x_data])\r\n            .attr(\"x\", function (d) { return self.x_scale(d[self.x_data]) + 5; })\r\n    }\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            name: \"Bar Sort\",\r\n            tooltips: \"Make the bar grow from 0 to full height\",\r\n            icon_representation: \"\",\r\n            create_fn: BarSort.create\r\n        }\r\n    }\r\n\r\n    static create(effect_stack, self = this) {\r\n        const effect = new BarSort(effect_stack);\r\n        return effect;\r\n    }\r\n\r\n    reconstruct_graph(self = this) {\r\n        this.actor.SVG_reference.clear();\r\n        this.actor.construct_graph();\r\n    }\r\n\r\n\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"start_per\":\r\n                this.start_per = value;\r\n                return;\r\n            case \"end_per\":\r\n                this.end_per = value;\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n        }\r\n        return { ...self.export_default_attributes(), ...new_attr };\r\n    }\r\n}\r\n\r\nexport default BarSort;\r\n","import * as d3 from 'd3';\r\nimport GraphObject from '../DefaultObjects/GraphObject';\r\nimport { input_types, scene } from \"../Scene\";\r\nimport SVG from 'svg.js';\r\nimport * as data from '../sales.csv';\r\nimport MoveEffect from './MoveEffect';\r\nimport FadeEffect from './FadeEffect';\r\nimport BarGrowByOne from './BarGrowByOne';\r\nimport BarSort from './BarSort';\r\nimport { editAttribute, setObject, addObject } from '../../actions/index'\r\nimport { store } from '../../index';\r\n\r\nclass SimpleBarChart extends GraphObject {\r\n    constructor(x, y, width, height, name, bounding_box) {\r\n        super(x, y, width, height, \"Simple Bar Chart\", name, bounding_box);\r\n        this.x_axis = null;\r\n        this.y_axis = null;\r\n        this.bars = null;\r\n        this.x_data = null;\r\n        this.y_data = null;\r\n        this.columns = null;\r\n        this.x_scale = null;\r\n        this.y_scale = null;\r\n        this.inner_graph = null;\r\n        this.margin = { top: 20, right: 20, bottom: 20, left: 20 };\r\n        this.graph_width = this.total_width - this.margin.left - this.margin.right;\r\n        this.graph_height = this.total_height - this.margin.top - this.margin.bottom;\r\n        this.raw_data = data;\r\n        this.data = \"\";\r\n        this.axis_styling = {};\r\n        this.bar_styling = '\"fill\":\"lightblue\",\"stroke\":\"lightblue\",\"stroke-width\":\"1\"';\r\n        this.import_data();\r\n        this.effect_bps = [BarSort.get_blueprint(), MoveEffect.get_blueprint(), FadeEffect.get_blueprint(), BarGrowByOne.get_blueprint()];\r\n        store.dispatch(addObject(this));\r\n        store.dispatch(setObject(this));\r\n        let self = this;\r\n        this.bounding_box.on('dragend', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            this.svg_container.attr('viewBox', `0 0 ${this.total_width} ${this.total_height}`)\r\n            this.SVG_reference.clear();\r\n            this.construct_graph();\r\n            console.log('a');\r\n\r\n        })\r\n        this.bounding_box.on('resizedone', (e) => {\r\n            store.dispatch(editAttribute(this, 'x', this.bounding_box.attr('x')));\r\n            store.dispatch(editAttribute(this, 'y', this.bounding_box.attr('y')));\r\n            store.dispatch(editAttribute(this, 'width', this.bounding_box.attr('width')));\r\n            store.dispatch(editAttribute(this, 'height', this.bounding_box.attr('height')));\r\n            this.svg_container.attr('viewBox', `0 0 ${this.total_width} ${this.total_height}`)\r\n            this.SVG_reference.clear();\r\n            this.construct_graph();\r\n\r\n        })\r\n        this.bounding_box.on('resizing', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n        });\r\n        this.bounding_box.on('dragmove', function (event) {\r\n            var x = self.bounding_box.attr('x');\r\n            var y = self.bounding_box.attr('y');\r\n            var width = self.bounding_box.attr('width');\r\n            var height = self.bounding_box.attr('height');\r\n            self.edit_attr({ attribute: 'x', value: x });\r\n            self.edit_attr({ attribute: 'y', value: y });\r\n            self.edit_attr({ attribute: 'width', value: width });\r\n            self.edit_attr({ attribute: 'height', value: height });\r\n        });\r\n    }\r\n\r\n    import_data(self = this) {\r\n        d3.csv(this.raw_data)\r\n            .then(function (data) {\r\n                self.data = data;\r\n                self.columns = Object.keys(self.data[0]);\r\n                self.x_data = self.columns[0];\r\n                self.y_data = self.columns[1];\r\n                // clear the graph\r\n                // this.SVG_reference.\r\n                self.SVG_reference.clear();\r\n                self.construct_graph();\r\n            })\r\n    }\r\n\r\n    construct_inner_graph(self = this) {\r\n        self.inner_graph = self.svg_container\r\n            .append(\"g\")\r\n            .attr(\"class\", \"inner_graph\")\r\n            .attr(\"transform\",\r\n                \"translate(\" + self.margin.left + \",\" + self.margin.top + \")\");\r\n    }\r\n\r\n    construct_x_axis(self = this) {\r\n        // add the x Axis\r\n        self.x_scale = d3.scaleBand()\r\n            .range([0, self.graph_width])\r\n        self.x_scale.domain(self.data.map(function (d) { return d[self.x_data]; }));\r\n        this.x_axis = self.inner_graph.append(\"g\")\r\n            .attr(\"class\", \"x_axis\")\r\n            .attr(\"transform\", \"translate(0,\" + self.graph_height + \")\")\r\n            .call(d3.axisBottom(self.x_scale));\r\n    }\r\n\r\n    construct_y_axis(self = this) {\r\n        self.y_scale = d3.scaleLinear()\r\n            .range([self.graph_height, 0]);\r\n        // add the y Axis\r\n        this.y_scale.domain([0, d3.max(self.data, function (d) { return d[self.y_data]; })]);\r\n        this.y_axis = self.inner_graph.append(\"g\")\r\n            .attr(\"class\", \"y_axis\")\r\n            .call(d3.axisLeft(self.y_scale));\r\n    }\r\n\r\n    select(self = this) {\r\n        this.bounding_box.draggable().selectize().resize();\r\n    }\r\n\r\n\r\n    construct_graph(self = this) {\r\n        self.construct_inner_graph();\r\n        self.construct_x_axis();\r\n        self.construct_y_axis();\r\n        // append the rectangles for the bar chart\r\n        self.bars = self.inner_graph.selectAll(\".\" + self.name + \"_bar\")\r\n            .data(self.data)\r\n            .enter().append(\"rect\")\r\n            .attr(\"class\", self.name + \"_bar\")\r\n            .attr(\"x\", function (d) { return self.x_scale(d[self.x_data]) + 5; })\r\n            .attr(\"width\", function (d) { return (self.x_scale.bandwidth() - 10) })\r\n            .attr(\"y\", function (d) { return self.y_scale(d[self.y_data]); })\r\n            .attr(\"height\", function (d) {\r\n                return self.graph_height - self.y_scale(d[self.y_data]);\r\n            });\r\n\r\n        this.apply_bar_string_styling();\r\n    }\r\n\r\n    get_targetable_components(self = this) {\r\n        return {\r\n            \"svg_container\": self.svg_container,\r\n            \"inner_graph\": self.inner_graph,\r\n            \"bars\": self.bars,\r\n            \"x_axis\": self.x_axis,\r\n            \"y_axis\": self.y_axis\r\n        }\r\n    }\r\n\r\n    static create(callback, self = this) {\r\n        const drawing = SVG.adopt(document.getElementById('canvas'));\r\n        // first, let's clear all other listener on drawing\r\n        drawing.off('mousedown');\r\n        drawing.off('mouseup');\r\n\r\n        var rect;\r\n        const start_draw = (e) => {\r\n            rect = drawing.rect();\r\n            rect.attr(\"fill\", \"none\");\r\n            rect.attr(\"stroke\", \"black\");\r\n            rect.attr(\"stroke-width\", \"2\");\r\n            rect.draw(e);\r\n        }\r\n        const end_draw = (e) => {\r\n            rect.draw('stop', e);\r\n            // add the circle to the list of new objects\r\n            var x = rect.x();\r\n            var y = rect.y();\r\n            var width = rect.attr('width');\r\n            var height = rect.attr('height');\r\n            // should be some sort of dispatch action here\r\n            // rect.attr('fill', 'none');\r\n            rect.addClass('bounding-box');\r\n            const new_rect = new SimpleBarChart(x, y, width, height, 'simple bar graph', rect);\r\n            // unbind the listener\r\n            drawing.off('mousedown', start_draw);\r\n            drawing.off('mouseup', end_draw);\r\n        }\r\n        drawing.on('mousedown', start_draw, false);\r\n        drawing.on('mouseup', end_draw, false);\r\n    }\r\n\r\n    static get_blueprint(self = this) {\r\n        return {\r\n            type: \"Simple Bar Chart\",\r\n            tooltips: \"This is a simple bar chart\",\r\n            icon_representation: \"fa-chart-bar\",\r\n            create_fn: SimpleBarChart.create\r\n        }\r\n    }\r\n\r\n    export_attributes(self = this) {\r\n        const new_attr = {\r\n            bar_styling: {\r\n                type: input_types.TEXT_AREA,\r\n                range: \"\",\r\n                tooltips: \"The name of the graphical object\",\r\n                value: this.bar_styling\r\n            },\r\n        }\r\n        return { ...this.export_default_attributes(), ...new_attr };\r\n    }\r\n\r\n    edit_attr(d) {\r\n        if (!d) return;\r\n        this.edit_default_attr(d);\r\n        const attr = d.attribute;\r\n        const value = d.value;\r\n        switch (attr) {\r\n            case \"bar_styling\":\r\n                this.bar_styling = value;\r\n                this.apply_bar_string_styling();\r\n\r\n                return;\r\n            case \"axis_styling\":\r\n                this.axis_styling = JSON.parse(value);\r\n                this.SVG_reference.clear();\r\n                this.construct_graph();\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n        this.graph_width = this.total_width - this.margin.left - this.margin.right;\r\n        this.graph_height = this.total_height - this.margin.top - this.margin.bottom;\r\n        this.bounding_box.attr(\"x\", this.x);\r\n        this.bounding_box.attr(\"y\", this.y);\r\n        this.bounding_box.attr(\"width\", this.total_width);\r\n        this.bounding_box.attr(\"height\", this.total_height);\r\n    }\r\n\r\n    apply_bar_string_styling(self = this) {\r\n        try {\r\n            let style_dict = JSON.parse(\"{\" + this.bar_styling + \"}\");\r\n            for (let style in style_dict) {\r\n                self.bars.attr(style, style_dict[style]);\r\n            }\r\n        }\r\n        catch (error) {\r\n            return;\r\n        }\r\n\r\n    }\r\n}\r\nexport default SimpleBarChart;\r\n"],"sourceRoot":""}